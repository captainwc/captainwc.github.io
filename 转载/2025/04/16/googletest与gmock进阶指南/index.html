<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>GoogleTestä¸gMockè¿›é˜¶æŒ‡å— | [è½¬è½½](https://www.cnblogs.com/jinyunshaobing/p/16804309.html) | SHUAIKAI&#39;s Blog</title>
    <link rel="icon" href= /images/favicon.png />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />

    <link rel="stylesheet" href="/css/custom.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">ä¸»é¡µ</a></li>
      
      <li><a href="/series/">ä¸“æ </a></li>
      
      <li><a href="/categories/">åˆ†ç±»</a></li>
      
      <li><a href="/tags/">æ ‡ç­¾</a></li>
      
      <li><a href="/archives/">å½’æ¡£</a></li>
      
      <li><a href="/search/">æœç´¢</a></li>
      
      <li><a href="/about/">å…³äº</a></li>
      
    </ul>
    <hr/>
    </nav>


<div class="article-meta">
    <h1><span class="article-meta-title">GoogleTestä¸gMockè¿›é˜¶æŒ‡å— | 
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html"  target="_blank" rel="noopener noreferrer" >è½¬è½½</a></span></h1>

    <div class="article-meta-info">
        

        
        
        
        

        
        
        
        

        
        

        
        
        
        
        
        
        
        
        

        
        
        
        
        
        
        
        
        

        ğŸ•ºğŸ» ç¼™äº‘çƒ§é¥¼ ğŸ—“ï¸ 2025-04-16 ğŸ—‚ï¸ <a href="/categories/%E5%8D%9A%E5%AE%A2%E5%89%AA%E8%97%8F/">åšå®¢å‰ªè—</a> ğŸ·ï¸ <a href="/tags/googletest/">#GoogleTest</a>
    </div>
</div>

<main>

    

<div class="left-sidebar-btn" id="leftSidebarBtn"><i class="fa-solid fa-list"></i></div>
<div class="left-sidebar-panel" id="leftSidebarPanel">
    
        <div class="sidebar-content">
            
            
            <div class="sidebar-section">
                <div class="sidebar-section-title">ğŸ·ï¸ æ ‡ç­¾</div>
                <div class="tag-blocks">
                    
                    <a href="/tags/googletest" class="tag-block">
                        GoogleTest
                    </a>
                    
                </div>
            </div>
            

            
            

            
            
            
            
            <div class="sidebar-section">
                <div class="sidebar-section-title">ğŸ—‚ï¸ åˆ†ç±»æ–‡ç« </div>
                
                
                <div class="category-group">
                    <div class="category-name">åšå®¢å‰ªè—</div>
                    <ul class="article-list">
                        
                        
                        <li class="article-item">
                            <a href="/%E8%BD%AC%E8%BD%BD/2025/06/10/22%E7%A7%8Dc-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%B9%B6%E5%8F%91%E6%A8%A1%E5%9E%8B/" class="article-link">
                                
                                <span class="article-title">C++ é«˜å¹¶å‘æœåŠ¡å™¨æ¨¡å‹å®ç° | [è½¬è½½](https://github.com/linkxzhou/mylib/blob/master/c%2B%2B/concurrency_server/README.md)</span>
                            </a>
                        </li>
                        
                        
                        
                        <li class="article-item">
                            <a href="/%E8%BD%AC%E8%BD%BD/2025/05/04/epoll%E8%AF%A6%E8%A7%A3/" class="article-link">
                                
                                <span class="article-title">Epollè¯¦ç»†ä»‹ç» | [è½¬è½½](https://mp.weixin.qq.com/s/pahk8ay5MvkvONeg1-M82w)</span>
                            </a>
                        </li>
                        
                        
                        
                        <li class="article-item">
                            <a href="/%E8%BD%AC%E8%BD%BD/2025/05/04/%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98%E8%AF%A6%E8%A7%A3/" class="article-link">
                                
                                <span class="article-title">å…±äº«å†…å­˜è¯¦è§£ | [è½¬è½½](https://mp.weixin.qq.com/s/wOySn0oi0xXREpFRBXCMmQ)</span>
                            </a>
                        </li>
                        
                        
                        
                        <li class="article-item">
                            <a href="/%E8%BD%AC%E8%BD%BD/2025/04/17/asio-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%A0%B8%E5%BF%83%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/" class="article-link">
                                
                                <span class="article-title">Asio åŸºæœ¬ä½¿ç”¨ä¸æ ¸å¿ƒè®¾è®¡æ€æƒ³ | [è½¬è½½](https://blog.csdn.net/gma999/article/details/143983035)</span>
                            </a>
                        </li>
                        
                        
                        
                        
                        
                        <li class="article-item">
                            <a href="/%E8%BD%AC%E8%BD%BD/2025/04/16/gtest_gmock-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%AE%9E%E8%B7%B5%E6%89%8B%E5%86%8C/" class="article-link">
                                
                                <span class="article-title">GTest / GMock å•å…ƒæµ‹è¯•å®è·µæ‰‹å†Œ | [è½¬è½½](https://imageslr.com/2023/gtest.html)</span>
                            </a>
                        </li>
                        
                        
                        
                        <li class="article-item">
                            <a href="/%E8%BD%AC%E8%BD%BD/2025/04/15/docker-%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%B9%E5%99%A8%E9%97%B4%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/" class="article-link">
                                
                                <span class="article-title">Docker ç½‘ç»œæ¨¡å¼è¯¦è§£åŠå®¹å™¨é—´ç½‘ç»œé€šä¿¡ | [è½¬è½½](https://www.cnblogs.com/mrhelloworld/p/docker11.html)</span>
                            </a>
                        </li>
                        
                        
                        
                        <li class="article-item">
                            <a href="/%E8%BD%AC%E8%BD%BD/2025/04/15/%E4%B8%87%E5%AD%97%E9%95%BF%E6%96%87%E7%AE%80%E8%BF%B0apollo%E4%B8%ADcyberrt%E6%A1%86%E6%9E%B6%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" class="article-link">
                                
                                <span class="article-title">ä¸‡å­—é•¿æ–‡ç®€è¿°Apolloä¸­CyberRTæ¡†æ¶åŸºç¡€æ¦‚å¿µ | [è½¬è½½](https://zhuanlan.zhihu.com/p/479518561#CTZ_DEFAULT)</span>
                            </a>
                        </li>
                        
                        
                    </ul>
                </div>
                
            </div>
            
        </div>
    </div>

    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const btn = document.getElementById('leftSidebarBtn');
            const panel = document.getElementById('leftSidebarPanel');
            let hoverTimeout;

            
            btn.addEventListener('mouseenter', () => {
                clearTimeout(hoverTimeout);
                panel.classList.add('show');
            });

            panel.addEventListener('mouseenter', () => clearTimeout(hoverTimeout));

            [btn, panel].forEach(el => {
                el.addEventListener('mouseleave', () => {
                    hoverTimeout = setTimeout(() => {
                        panel.classList.remove('show');
                    }, 200);
                });
            });
        });
    </script>
    

    <style>
        

         
        .left-sidebar-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 980;
            cursor: pointer;
            padding: 6px 10px;
            background: #EFEFEF;
            border-radius: 8px;
            transition: background 0.3s;
            color: #999;
            opacity: 0.7;
        }

        .left-sidebar-btn:hover {
            background: #BEC2B3;
        }

        .left-sidebar-panel {
            border-radius: 8px;
            display: none;
            position: fixed;
            top: 66px;
            left: 20px;
            max-width: 360px;
            min-width: 280px;
            max-height: 80vh;
            overflow-y: auto;
            background: white;
            border: 1px solid #eee;
            padding: 10px 5px 10px 15px;
            z-index: 970;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .left-sidebar-panel.show {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        

        .sidebar-content {
            padding: 15px 12px;
        }

        .sidebar-section {
            margin-bottom: 1.2rem;
        }

        .sidebar-section-title {
            font-size: 1rem;
            color: #2d3842;
            margin: 0 0 0.6rem 0;
            padding-bottom: 0.3rem;
            font-family: "LXGW WenKai";
            font-weight: bold;

             
            
            border-bottom: 2px dashed #cfcfcf;
            
        }

         
        .tag-blocks {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
        }

        .tag-block {
            display: inline-block;
            background: #F6F6F6;
            color: #666;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            border: 1px solid #e0e0e0;
        }

        .tag-block:hover {
            background: #2e59a7;
            color: white;
            transform: translateY(-1px);
        }

         
        .series-group,
        .category-group {
            margin-bottom: 0.8rem;
        }

        .series-name,
        .category-name {
            font-size: 0.9rem;
            color: #666;
            margin: 0 0 0.4rem 0;
            font-weight: bold;
            font-family: "LXGW WenKai";
        }

         
        .article-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .article-item {
            margin-bottom: 0.3rem;
        }

        .article-link {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.25rem 0.4rem;
            border-radius: 4px;
            text-decoration: none;
            color: #333;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .article-link:hover {
            background: #f8f9fa;
            border-left-color: #2e59a7;
            transform: translateX(3px);
        }

        .article-date {
            font-size: 0.8rem;
            color: #999;
            font-family: "LXGW WenKai";
            flex-shrink: 0;
            width: 45px;
            text-align: left;
        }

        .article-title {
            flex: 1;
            font-size: 0.9rem;
            line-height: 1.2;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

         
        

        .left-sidebar-panel::-webkit-scrollbar {
            display: none;
        }

        .left-sidebar-panel {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        

         
        @media (max-width: 768px) {
        
        }
    </style>

    


<div class="toc-btn" id="tocBtn"><i class="fa-solid fa-bars-staggered"></i></div>
<div class="toc-panel" id="tocPanel"></div>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        
        
        const btn = document.getElementById('tocBtn');
        const panel = document.getElementById('tocPanel');
        let hoverTimeout;

        
        btn.addEventListener('mouseenter', () => {
            clearTimeout(hoverTimeout);
            generateToc(panel);
            panel.classList.add('show');

            
            requestAnimationFrame(() => {
                const headers = Array.from(document.querySelectorAll('h2, h3, h4, h5, h6'));
                let activeHeader = null;
                let minDistance = Infinity;

                
                headers.forEach(header => {
                    const rect = header.getBoundingClientRect();
                    const distance = Math.abs(rect.top);
                    if (distance < minDistance) {
                        minDistance = distance;
                        activeHeader = header;
                    }
                });

                
                if (activeHeader) {
                    const activeLink = panel.querySelector(`a[href="#${activeHeader.id}"]`);
                    if (activeLink) {
                        
                        const panelHeight = panel.offsetHeight;
                        const linkOffset = activeLink.offsetTop;
                        const centerPosition = linkOffset - (panelHeight / 2) + (activeLink.offsetHeight / 2);
                        
                        panel.scrollTo({
                            top: centerPosition,
                            behavior: 'auto'
                        });
                    }
                }
            });
        });

        panel.addEventListener('mouseenter', () => clearTimeout(hoverTimeout));

        [btn, panel].forEach(el => {
            el.addEventListener('mouseleave', () => {
                hoverTimeout = setTimeout(() => {
                    panel.classList.remove('show');
                }, 200);
            });
        });
        

        
        function generateToc(container) {
            if (container.children.length > 0) return;

            const headers = Array.from(document.querySelectorAll('h2, h3, h4, h5, h6'));
            const counts = [0, 0, 0, 0, 0]; 

            headers.forEach(header => {
                const level = parseInt(header.tagName[1]) - 2;
                if (level < 0) return;

                counts[level]++;
                for (let i = level + 1; i < counts.length; i++) counts[i] = 0;
                const number = counts.slice(0, level + 1).join('.');

                
                const numberSpan = document.createElement('span');
                numberSpan.className = 'toc-number';
                numberSpan.textContent = number;

                
                const link = document.createElement('a');
                link.href = `#${header.id}`;
                link.style.paddingLeft = `${level * 12}px`;

                
                link.appendChild(numberSpan);
                link.appendChild(document.createTextNode(header.textContent));

                container.appendChild(link);
            });
        }
    });
</script>

<style>
    

     
    .toc-btn {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 980;
        cursor: pointer;
        padding: 6px 10px;
        background: #EFEFEF;
        border-radius: 8px;
        transition: background 0.3s;
        color: #999;
        opacity: 0.7;
    }

    .toc-btn:hover {
        background: #BEC2B3;
    }

    .toc-panel {
        border-radius: 8px;
        display: none;
        position: fixed;
        top: 66px;
        right: 20px;
        max-width: 360px;
        min-width: 200px;
        max-height: 80vh;
        overflow-y: auto;
        background: white;
        border: 1px solid #eee;
        padding: 10px 5px 10px 15px;
        z-index: 970;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        list-style: none;
    }

    .toc-panel.show {
        display: block;
        animation: fadeIn 0.3s ease-out;
    }

     
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateX(10px);
        }

        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    

     
    .toc-number {
        vertical-align: middle;
        margin-right: 6px;
        font-family: "LXGW WenKai";
        font-size: 0.85rem;
    }

     
        

    .toc-panel a {
        
            display: block;
            padding: 4px 0;
            text-decoration: none;
            color: #333;
            white-space: nowrap;
        }

        

        .toc-panel a:hover {
        

                color: #007bff;
            }

        
</style>


    
    
    
        <h1 id="cgoogletest-å…¥é—¨æŒ‡å—---ç¼™äº‘çƒ§é¥¼---åšå®¢å›­">ã€C++ã€‘GoogleTest å…¥é—¨æŒ‡å— - ç¼™äº‘çƒ§é¥¼ - åšå®¢å›­</h1>

          <link rel="stylesheet" href="/css/vendors/admonitions.e8f9d71468684b38dcc32a3631441f47b6ee45ce52f3bcc31201e76cc2b0a193.css" integrity="sha256-6PnXFGhoSzjcwyo2MUQfR7buRc5S87zDEgHnbMKwoZM=" crossorigin="anonymous">
  <div class="admonition warning">
    <div class="admonition-header">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/></svg>
      <span>å£°æ˜</span>
    </div>
      <div class="admonition-content">
        <ul>
<li>æœ¬æ–‡ç”±æ’ä»¶
<a href="https://chromewebstore.google.com/detail/markdownload-markdown-web/pcmpcfapbekmbjjkdalcgopdkipoggdi?pli=1"  target="_blank" rel="noopener noreferrer" >Markdown Web Clipper</a>
è‡ªåŠ¨æå–ç½‘é¡µæ­£æ–‡è€Œæ¥ï¼Œå¹¶æœªè·å–åŸä½œè€…æˆæƒï¼</li>
<li>æœ¬æ–‡ä»…ä½œä¸ªäººå­˜æ¡£å­¦ä¹ ä½¿ç”¨ï¼Œå¦‚æœ‰ä»»ä½•ç–‘é—®/éœ€æ±‚è¯·æŸ¥çœ‹
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html"  target="_blank" rel="noopener noreferrer" >åŸæ–‡</a>
ï¼</li>
<li>å¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»æœ¬äººç«‹åˆ»åˆ é™¤ï¼</li>
<li>åŸæ–‡é“¾æ¥: 
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html"  target="_blank" rel="noopener noreferrer" >ã€C++ã€‘GoogleTest å…¥é—¨æŒ‡å—</a>
</li>
</ul>
      </div>
  </div>
<hr>
<p>å‚è€ƒï¼š<br>

<a href="https://google.github.io/googletest/"  target="_blank" rel="noopener noreferrer" >GoogleTest å®˜ç½‘</a>
</p>
<h2 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h2>
<p>è¦ä½¿ç”¨ GoogleTestï¼Œéœ€è¦åŒ…å« header <code>gtest/gtest.h</code></p>
<h2 id="æ–­è¨€-assertionshttpswwwcnblogscomjinyunshaobingp16717123html728254241">æ–­è¨€ Assertions
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#728254241"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<p>æ–­è¨€æ˜¯æ£€æŸ¥æ¡ä»¶æ˜¯å¦ä¸ºçœŸçš„è¯­å¥ï¼Œå…¶ç»“æœå¯èƒ½æ˜¯æˆåŠŸæˆ–å¤±è´¥ï¼Œå¤±è´¥åˆ†ä¸ºéè‡´å‘½å¤±è´¥å’Œè‡´å‘½å¤±è´¥ä¸¤ç§ï¼Œåè€…ä¼šç»ˆæ­¢å½“å‰è¿è¡Œï¼Œå‰è€…åˆ™ä¼šç»§ç»­è¿è¡Œã€‚<br>
GoogleTest ä¸­ï¼Œæ–­è¨€ç±»ä¼¼äºå‡½æ•°è°ƒç”¨çš„å®ï¼Œæ–­è¨€å¤±è´¥æ—¶ï¼ŒGoogleTest ä¼šè¾“å‡ºæ–­è¨€çš„æºæ–‡ä»¶å’Œè¡Œå·ä½ç½®ä»¥åŠå¤±è´¥æ¶ˆæ¯ï¼ˆæ‰€æœ‰æ–­è¨€éƒ½å¯ä»¥ä½¿ç”¨&laquo;è¾“å‡ºè‡ªå®šä¹‰å¤±è´¥æ¶ˆæ¯ï¼‰</p>
<h3 id="assert_httpswwwcnblogscomjinyunshaobingp16717123html4031066449">ASSERT_*
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#4031066449"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<p>ä¼šæŠ›å‡ºè‡´å‘½å¤±è´¥æ•…éšœçš„æ–­è¨€ï¼Œæ–­è¨€å¤±è´¥æ—¶ä¸­æ­¢å½“å‰æµ‹è¯•å‡½æ•°çš„è¿è¡Œï¼ˆä¸æ˜¯ä¸­æ–­æ•´ä¸ª TESTï¼‰ã€‚</p>
<pre><code class="language-cpp">ASSERT_EQ(x.size(),y.size())  &quot;xä¸yçš„å¤§å°ä¸ç›¸åŒ&quot;
</code></pre>
<h3 id="expect_httpswwwcnblogscomjinyunshaobingp16717123html2723575970">EXPECT_*
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#2723575970"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<p>ä¼šæŠ›å‡ºéè‡´å‘½å¤±è´¥æ•…éšœçš„æ–­è¨€ï¼Œä¸ä¼šåœæ­¢å½“å‰å‡½æ•°è¿è¡Œï¼Œè€Œæ˜¯ç»§ç»­å¾€ä¸‹è¿è¡Œä¸‹å»</p>
<pre><code class="language-cpp">EXPECT_EQ(x,y)  &quot;xä¸yä¸ç›¸ç­‰&quot;
</code></pre>
<h3 id="æ–­è¨€åˆ†ç±»httpswwwcnblogscomjinyunshaobingp16717123html41088525">æ–­è¨€åˆ†ç±»
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#41088525"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<p>å‰ç¼€éƒ½ä¼šæ˜¯ ASSERT_æˆ–è€… EXPECT_,å®ƒä»¬çš„åŒºåˆ«ä¸Šé¢å·²ç»è¿›è¡Œäº†è¯´æ˜ï¼Œæ‰€ä»¥ä»¥ä¸‹éƒ½ç”¨ X_æ¥ç•¥å†™</p>
<h4 id="åŸºæœ¬æ–­è¨€httpswwwcnblogscomjinyunshaobingp16717123html1101063573">åŸºæœ¬æ–­è¨€
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#1101063573"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<ul>
<li>X_TRUE(condition)ï¼šæ–­è¨€ condition ä¸º True</li>
<li>X_FALSE(condition)ï¼šæ–­è¨€ condition ä¸º False</li>
</ul>
<h4 id="æ™®é€šæ¯”è¾ƒå‹æ–­è¨€httpswwwcnblogscomjinyunshaobingp16717123html2970445533">æ™®é€šæ¯”è¾ƒå‹æ–­è¨€
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#2970445533"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<ul>
<li>X_EQ(v1,v2)ï¼š==</li>
<li>X_NE(v1,v2)ï¼š!=</li>
<li>X_LT(v1,v2)ï¼š&lt;</li>
<li>X_LE(v1,v2)ï¼š&lt;=</li>
<li>X_GT(v1,v2)ï¼š&gt;</li>
<li>X_GE(v1,v2)ï¼š&gt;=</li>
</ul>
<h4 id="c-å­—ç¬¦ä¸²æ¯”è¾ƒå‹æ–­è¨€httpswwwcnblogscomjinyunshaobingp16717123html3651399125">C å­—ç¬¦ä¸²æ¯”è¾ƒå‹æ–­è¨€
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#3651399125"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<ul>
<li>X_STREQ(s1,s2)ï¼šs1==s2</li>
<li>X_STRNE(s1,s2)ï¼šs1!=s2</li>
<li>X_STRCASEEQ(s1,s2)ï¼šå¿½ç•¥å¤§å°å†™ï¼Œs1==s2</li>
<li>X_STRCASENE(s1,s2)ï¼šå¿½ç•¥å¤§å°å†™ï¼Œs1!=s2
æ³¨æ„ï¼š</li>
<li>Null æŒ‡é’ˆå’Œç©ºå­—ç¬¦&quot;&ldquo;æ˜¯ä¸ç›¸åŒçš„</li>
<li>å‡å¦‚ char *s1 = &ldquo;abc&rdquo;ï¼Œchar *s2 = &ldquo;abc&rdquo;ï¼Œé‚£ä¹ˆ X_EQ(s1,s2)ä¸é€šè¿‡ï¼Œå› ä¸º s1 ä¸ s2 å®é™…ä¸Šæ˜¯åœ°å€æŒ‡é’ˆï¼Œä¸ç›¸åŒ;X_STREQ(s1,s2)é€šè¿‡ï¼Œå› ä¸ºå­—ç¬¦ä¸²ç›¸åŒ</li>
</ul>
<h4 id="æµ®ç‚¹æ•°æ¯”è¾ƒå‹æ–­è¨€httpswwwcnblogscomjinyunshaobingp16717123html3278043603">æµ®ç‚¹æ•°æ¯”è¾ƒå‹æ–­è¨€
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#3278043603"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<p>å¯¹äºæµ®ç‚¹æ•°ï¼Œæ–­è¨€åªæ˜¯åˆ¤æ–­å‡ ä¹ç›¸ç­‰</p>
<ul>
<li>X_FLOAT_EQ(f1,f2)ï¼šf1 å’Œ f2 ä¸¤ä¸ª float å€¼å‡ ä¹ç›¸ç­‰</li>
<li>X_DOUBLE_EQ(f1,f2)ï¼šf1 å’Œ f2 ä¸¤ä¸ª double å€¼å‡ ä¹ç›¸ç­‰</li>
<li>X_NEAR(v1,v2,abs_error)ï¼šv1 å’Œ v2 ä¸¤ä¸ªæµ®ç‚¹æ•°çš„å€¼å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ abs_error</li>
</ul>
<h4 id="æ˜ç¡®çš„æˆåŠŸä¸å¤±è´¥httpswwwcnblogscomjinyunshaobingp16717123html3815582">æ˜ç¡®çš„æˆåŠŸä¸å¤±è´¥
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#3815582"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<ul>
<li>SUCCEED()ï¼šç”Ÿæˆä¸€ä¸ªæˆåŠŸï¼Œæ”¾è¡Œï¼Œä½†æ˜¯å¹¶ä¸ä»£è¡¨æ•´ä¸ªæµ‹è¯•æˆåŠŸ</li>
<li>FAIL()ï¼šç”Ÿæˆè‡´å‘½é”™è¯¯ï¼Œç«‹å³ç»ˆæ­¢å½“å‰æµ‹è¯•</li>
<li>ADD_FAILURE()ï¼šç”Ÿæˆéè‡´å‘½é”™è¯¯ï¼Œç»§ç»­è¿è¡Œæµ‹è¯•</li>
<li>ADD_FAILURE_AT(&ldquo;file_path&rdquo;,line_number)ï¼šç”Ÿæˆéè‡´å‘½é”™è¯¯ï¼Œè¾“å‡ºæ–‡ä»¶åå’Œè¡Œå·</li>
<li>GTEST_SKIP()ï¼šç›´æ¥ç»“æŸå½“å‰æµ‹è¯•
æ˜ç¡®çš„æˆåŠŸä¸å¤±è´¥ç›¸è¾ƒäºå‰é¢çš„æ–­è¨€æ›´é€‚åˆåˆ¤æ–­æ¡ä»¶å¤æ‚çš„æƒ…å†µï¼Œå› ä¸ºåˆ¤æ–­æ¡ä»¶å¤æ‚ä¸é€‚åˆå†™æˆä¸€ä¸ªè¡¨è¾¾å¼ condition ç”¨äºåˆ¤æ–­ã€‚ä¾‹å¦‚<code>if...else if...else if... else...</code></li>
</ul>
<h4 id="å¼‚å¸¸æ–­è¨€httpswwwcnblogscomjinyunshaobingp16717123html3202904611">å¼‚å¸¸æ–­è¨€
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#3202904611"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<p>ç”¨äºéªŒè¯ä¸€æ®µä»£ç æ˜¯å¦æŠ›å‡ºç»™å®šç±»å‹çš„å¼‚å¸¸</p>
<ul>
<li>X_THROW(statement,exception_type)ï¼šstatement ä»£ç ä¼šæŠ›å‡º exception_type çš„å¼‚å¸¸</li>
<li>X_ANY_THROW(statement)ï¼šstatement ä»£ç ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä¸é™å¼‚å¸¸ç±»å‹</li>
<li>X_NO_THROW(statement)ï¼šstatement ä»£ç ä¸ä¼šæŠ›å‡ºä»»ä½•ç±»å‹å¼‚å¸¸</li>
</ul>
<h4 id="è‡ªå®šä¹‰å¸ƒå°”å‡½æ•°æ–­è¨€è°“è¯æ–­è¨€httpswwwcnblogscomjinyunshaobingp16717123html2027338141">è‡ªå®šä¹‰å¸ƒå°”å‡½æ•°æ–­è¨€ï¼ˆè°“è¯æ–­è¨€ï¼‰
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#2027338141"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<ul>
<li>X_PREDn(fun,v1,v2&hellip;)ï¼šæ‹¥æœ‰ n ä¸ªå‚æ•°çš„å‡½æ•° fun ä¼šè¿”å› True
ä¾‹å¦‚æœ‰ä¸€ä¸ªå‡½æ•° equal(a,b)ï¼Œé‚£ä¹ˆå°±æ˜¯ ASSERT_PRED2(equal,a,b)
ä¸ ASSERT_EQã€ASSERT_TRUE()è¿™äº›æ–­è¨€çš„åŒºåˆ«åœ¨äºè¾“å‡ºçš„é”™è¯¯ä¿¡æ¯ä¸åŒï¼ŒåŒæ—¶å®ƒçš„åŠŸèƒ½æ›´åŠ å¼ºå¤§</li>
</ul>
<h4 id="è°“è¯æ ¼å¼åŒ–ç¨‹åºæ–­è¨€httpswwwcnblogscomjinyunshaobingp16717123html2572316932">è°“è¯æ ¼å¼åŒ–ç¨‹åºæ–­è¨€
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#2572316932"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<p>æ™®é€šçš„æ–­è¨€è¾“å‡ºä¿¡æ¯çš„å†…å®¹æ˜¯é¢„å®šå¥½çš„ï¼Œå¦‚æœæƒ³è¦è‡ªå®šä¹‰è¾“å‡ºçš„å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨è°“è¯æ ¼å¼åŒ–ç¨‹åºæ–­è¨€
å…·ä½“æ¥å£ä½¿ç”¨å¯å‚è€ƒï¼š
<a href="https://google.github.io/googletest/reference/assertions.html#EXPECT_PRED_FORMAT"  target="_blank" rel="noopener noreferrer" >EXPECT_PRED_FORMAT</a>

ä¸ºäº†é¿å…æ–°çš„æ–­è¨€å®çˆ†ç‚¸å¼å¢é•¿ï¼ŒGoogleTest æä¾›äº†å¾ˆå¤šè°“è¯æ ¼å¼å‡½æ•°ï¼Œå®ƒä»¬å¯ä»¥ä½¿ç”¨è°“è¯æ–­è¨€çš„æ–¹å¼ç»„è£…æˆéœ€è¦çš„æ–­è¨€ï¼Œä¾‹å¦‚æµ®ç‚¹æ•°çš„å°äºç­‰äº</p>
<pre><code>using ::testing::FloatLE;
using ::testing::DoubleLE;
...
EXPECT_PRED_FORMAT2(FloatLE, val1, val2);
EXPECT_PRED_FORMAT2(DoubleLE, val1, val2);

</code></pre>
<h4 id="åŒ¹é…å™¨æ–­è¨€httpswwwcnblogscomjinyunshaobingp16717123html2179868448">åŒ¹é…å™¨æ–­è¨€
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#2179868448"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<p><code>X_THAT(value, matcher)</code>ï¼švalue çš„å€¼æ»¡è¶³ matcher çš„è¦æ±‚</p>
<pre><code class="language-cpp">#include &quot;gmock/gmock.h&quot;

using ::testing::AllOf;
using ::testing::Gt;
using ::testing::Lt;
using ::testing::MatchesRegex;
using ::testing::StartsWith;

...
EXPECT\_THAT(value1, StartsWith(&quot;Hello&quot;));
EXPECT\_THAT(value2, MatchesRegex(&quot;Line \\d+&quot;));
ASSERT\_THAT(value3, AllOf(Gt(5), Lt(10)));
</code></pre>
<p>å…³äº matcher çš„å…·ä½“æ¥å£æ–‡æ¡£ï¼Œè¯¦è§
<a href="https://google.github.io/googletest/reference/matchers.html"  target="_blank" rel="noopener noreferrer" >matchers</a>
</p>
<h4 id="ç±»å‹æ–­è¨€httpswwwcnblogscomjinyunshaobingp16717123html2273366328">ç±»å‹æ–­è¨€
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#2273366328"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<p>è°ƒç”¨å‡½æ•°::testing::StaticAssertTypeEq&lt;T1,T2&gt;();
ç”¨äºæ–­è¨€ T1 å’Œ T2 æ˜¯åŒä¸€ç§ç±»å‹ï¼Œå¦‚æœæ–­è¨€æ»¡è¶³ï¼Œè¯¥å‡½æ•°ä»€ä¹ˆä¹Ÿä¸åšï¼Œå¦‚æœä¸åŒï¼Œå‡½æ•°è°ƒç”¨ä¼šæ— æ³•ç¼–è¯‘å¹¶æŠ¥é”™<code>T1 and T2 are not the same type</code>
æ³¨æ„ï¼šå¦‚æœæ˜¯åœ¨ç±»æ¨¡æ¿æˆ–è€…å‡½æ•°æ¨¡æ¿ä¸­ä½¿ç”¨æ—¶ï¼Œä»…å½“è¯¥å‡½æ•°è¢«å®ä¾‹åŒ–ï¼ˆè¢«è°ƒç”¨ï¼‰æ—¶æ‰ä¼šç”Ÿæ•ˆæŠ¥é”™ï¼Œå¦åˆ™ä¸ä¼šæŠ¥é”™</p>
<h3 id="æ–­è¨€ä½¿ç”¨çš„ä½ç½®httpswwwcnblogscomjinyunshaobingp16717123html1386563112">æ–­è¨€ä½¿ç”¨çš„ä½ç½®
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#1386563112"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<p>é™¤äº†åœ¨æµ‹è¯•ä»£ç ä¸­ä½¿ç”¨æ–­è¨€å¤–ï¼Œåœ¨ä»»ä½• C++å‡½æ•°ä¸­ä¹Ÿéƒ½å¯ä»¥ä½¿ç”¨æ–­è¨€ã€‚ä½†æ˜¯æ³¨æ„ï¼Œäº§ç”Ÿè‡´å‘½é”™è¯¯çš„æ–­è¨€åªèƒ½ç”¨åœ¨è¿”å› void çš„å‡½æ•°ï¼ˆæ„é€ ä¸ææ„å‡½æ•°ä¸æ˜¯è¿”å› void çš„å‡½æ•°ï¼‰</p>
<h2 id="æµ‹è¯•httpswwwcnblogscomjinyunshaobingp16717123html4059550918">æµ‹è¯•
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#4059550918"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<h3 id="ç®€å•æµ‹è¯•httpswwwcnblogscomjinyunshaobingp16717123html2137147839">ç®€å•æµ‹è¯•
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#2137147839"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<ul>
<li>
<p>ä½¿ç”¨<code>TEST()</code>å®å®šä¹‰å’Œå‘½åæµ‹è¯•å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä¸è¿”å›å€¼çš„æ™®é€š C++å‡½æ•°</p>
</li>
<li>
<p>å‡½æ•°ä¸­å¯ä»¥åŒ…å«ä»»ä½•æœ‰æ•ˆçš„ C++è¯­å¥ä»¥åŠå„ç§ GoogleTest æ–­è¨€æ¥æ£€æŸ¥å€¼</p>
</li>
<li>
<p>æµ‹è¯•çš„ç»“æœç”±æ–­è¨€å†³å®šï¼Œå¦‚æœæµ‹è¯•æ—¶æ²¡æœ‰ä»»ä½•æ–­è¨€å¤±è´¥ï¼ˆè‡´å‘½æˆ–éè‡´å‘½ï¼‰æˆ–è€…æµ‹è¯•ç¨‹åºå´©æºƒï¼Œåˆ™æµ‹è¯•æˆåŠŸ</p>
</li>
<li>
<p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµ‹è¯•å¥—ä»¶çš„åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æµ‹è¯•å¥—ä»¶ä¸­çš„æµ‹è¯•åç§°ï¼Œè¿™ä¸¤ä¸ªåç§°éƒ½å¿…é¡»æ˜¯æœ‰æ•ˆçš„ C++æ ‡è¯†ç¬¦ï¼Œå¹¶ä¸”ä¸èƒ½å«æœ‰ä»»ä½•ä¸‹åˆ’çº¿ã€‚æµ‹è¯•çš„å…¨åç”±æµ‹è¯•å¥—ä»¶å’Œæµ‹è¯•åç§°ç»„æˆï¼Œä¸åŒæµ‹è¯•å¥—ä»¶çš„æµ‹è¯•å¯ä»¥æœ‰ç›¸åŒçš„æµ‹è¯•åç§°</p>
<p>TEST(TestSuiteName, TestName){
&hellip; test body &hellip;
}</p>
</li>
</ul>
<h4 id="ä¸¾ä¸ªæ —å­httpswwwcnblogscomjinyunshaobingp16717123html69825821">ä¸¾ä¸ªæ —å­
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#69825821"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<p>å‡½æ•° funA æœ‰ä¸€ä¸ªè¾“å…¥ nï¼Œè¿”å› n^2ï¼Œä¸¤ä¸ªæµ‹è¯•éƒ½å±äº FunATests æµ‹è¯•å¥—ä»¶ï¼Œåå­—åˆ†åˆ«æ˜¯ HandlesZeroInput å’Œ HandlesPositiveInput ç”¨äºæµ‹è¯•ä¸åŒçš„æƒ…å†µ</p>
<pre><code class="language-cpp">int funA(int n);

TEST(FunATests, HandlesZeroInput){
    EXPECT_EQ(funA(0), 0);
}
TEST(FunATests, HandlesPositiveInput){
    EXPECT_EQ(funA(1), 1);
    EXPECT_EQ(funA(2), 4);
    ...
}
</code></pre>
<h3 id="æµ‹è¯•å¤¹å…·httpswwwcnblogscomjinyunshaobingp16717123html3748996127">æµ‹è¯•å¤¹å…·
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#3748996127"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<p>å¦‚æœå‘ç°è‡ªå·±ç¼–å†™äº†ä¸¤ä¸ªæˆ–å¤šä¸ªå¯¹ç›¸ä¼¼æ•°æ®è¿›è¡Œæ“ä½œçš„æµ‹è¯•ï¼Œå¯ä»¥ä½¿ç”¨æµ‹è¯•å¤¹å…·ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä¸ºå¤šä¸ªä¸åŒçš„æµ‹è¯•é‡ç”¨ç›¸åŒçš„å¯¹è±¡é…ç½®</p>
<h4 id="åˆ›å»ºå¹¶ä½¿ç”¨å¤¹å…·httpswwwcnblogscomjinyunshaobingp16717123html2800151575">åˆ›å»ºå¹¶ä½¿ç”¨å¤¹å…·
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#2800151575"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<ul>
<li>ä»::tesing::Test æ´¾ç”Ÿä¸€ä¸ªç±»ï¼Œå®ƒçš„ä¸»ä½“å†…å®¹è®¾ç½®ä¸º protectedï¼Œå› ä¸ºæˆ‘ä»¬è¦ä»å­ç±»ä¸­è®¿é—®å¤¹å…·æˆå‘˜</li>
<li>åœ¨ç±»ä¸­ï¼Œå£°æ˜è®¡åˆ’ä½¿ç”¨çš„æ‰€æœ‰å¯¹è±¡æ•°æ®</li>
<li>å¦‚æœ‰å¿…è¦ï¼Œç¼–å†™ä¸€ä¸ªé»˜è®¤æ„é€ å‡½æ•°æˆ–è€… SetUp()å‡½æ•°æ¥ä¸ºæ¯ä¸ªæµ‹è¯•å‡†å¤‡å¯¹è±¡</li>
<li>å¦‚æœ‰å¿…è¦ï¼Œç¼–å†™ä¸€ä¸ªææ„å‡½æ•°æˆ–è€… TearDown()å‡½æ•°æ¥é‡Šæ”¾æµ‹è¯•å¯¹è±¡æ•°æ®</li>
<li>å¦‚æœ‰éœ€è¦ï¼Œç¼–å†™å‡½æ•°ä¾›ä½¿ç”¨è¯¥æµ‹è¯•å¤¹å…·çš„æµ‹è¯•å†…ä½¿ç”¨</li>
<li>æ³¨æ„ï¼ŒGoogleTest ä¸ä¼šåœ¨å¤šä¸ªæµ‹è¯•ä¸­é‡ç”¨åŒä¸€ä¸ªæµ‹è¯•å¤¹å…·å¯¹è±¡ã€‚å¯¹äºæ¯ä¸ª TEST_Fï¼ŒGoogleTest ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æµ‹è¯•å¤¹å…·å¯¹è±¡å¹¶ç«‹åˆ»è°ƒç”¨ SetUp()ï¼Œè¿è¡Œæµ‹è¯•ä¸»é¢˜ç»“æŸåè°ƒç”¨ TearDown()ï¼Œæœ€ååˆ é™¤æµ‹è¯•å¤¹å…·å¯¹è±¡</li>
<li>ä½¿ç”¨æµ‹è¯•å¤¹å…·çš„æ—¶å€™ï¼Œç”¨ TEST_F ä»£æ›¿ TESTï¼ŒTEST_F çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸å†æ˜¯æµ‹è¯•å¥—ä»¶åï¼Œè€Œæ˜¯æµ‹è¯•å¤¹å…·ç±»åï¼Œå…·ä½“è§ä¸‹æ–¹æ ·ä¾‹</li>
</ul>
<h4 id="ä¸¾ä¸ªæ —å­httpswwwcnblogscomjinyunshaobingp16717123html978734251">ä¸¾ä¸ªæ —å­
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#978734251"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç±» Queue éœ€è¦è¿›è¡Œæµ‹è¯•ï¼Œå®ƒé•¿è¿™æ ·ï¼š</p>
<pre><code class="language-cpp">template &lt;typename E&gt;  // E is the element type.
class Queue {
public:
    Queue();
    void Enqueue(const E element);
    E* Dequeue();  // Returns NULL if the queue is empty.
    size_t size() const;
...
};

</code></pre>
<p>å®šä¹‰å®ƒçš„æµ‹è¯•å¤¹å…·ç±»ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æµ‹è¯•å¤¹å…·ç±»å=ç±»å+Test</p>
<pre><code class="language-cpp">class QueueTest : public ::testing::Test {
protected:
    void SetUp() override {
        q1_.Enqueue(1);
        q2_.Enqueue(2);
        q2_.Enqueue(3);
    }

    // void TearDown() override {}

    Queue&lt;int&gt; q0_;
    Queue&lt;int&gt; q1_;
    Queue&lt;int&gt; q2_;
};

</code></pre>
<p>åœ¨è¿™é‡Œï¼ŒTearDown()å¹¶ä¸éœ€è¦ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸éœ€è¦è¿›è¡Œä»»ä½•æ¸…ç†å·¥ä½œï¼Œç›´æ¥ææ„å°±å¯ä»¥äº†</p>
<p>ä½¿ç”¨æµ‹è¯•å¤¹å…·è¿›è¡Œæµ‹è¯•</p>
<pre><code class="language-cpp">TEST_F(QueueTest, IsEmptyInitially) {
  EXPECT_EQ(q0_.size(), 0);
}

TEST_F(QueueTest, DequeueWorks) {
  int* n = q0_.Dequeue();
  EXPECT_EQ(n, nullptr);

  n = q1_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 1);
  EXPECT_EQ(q1_.size(), 0);
  delete n;

  n = q2_.Dequeue();
  ASSERT_NE(n, nullptr);
  EXPECT_EQ(*n, 2);
  EXPECT_EQ(q2_.size(), 1);
  delete n;
}

</code></pre>
<p>åœ¨è¿™ä¸ªæ —å­é‡Œï¼Œç¬¬ä¸€ä¸ª TEST_F åˆ›å»ºä¸€ä¸ª QueueTest å¯¹è±¡ t1ï¼Œt1.SetUp()åè¿›å…¥æµ‹è¯•å†…å®¹è¿›è¡Œä½¿ç”¨ã€‚æµ‹è¯•ç»“æŸå t1.TearDown()ç„¶åé”€æ¯ã€‚å¯¹äºç¬¬äºŒä¸ª TEST_F è¿›è¡Œç›¸åŒçš„è¿‡ç¨‹</p>
<h2 id="è°ƒç”¨æµ‹è¯•httpswwwcnblogscomjinyunshaobingp16717123html2047075719">è°ƒç”¨æµ‹è¯•
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#2047075719"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<p>TEST()å’Œ TEST_F éƒ½ä¼šè‡ªåŠ¨çš„éšå¼æ³¨å†Œåˆ° GoogleTestï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦ä¸ºäº†æµ‹è¯•å†é‡æ–°åˆ—ä¸¾æ‰€æœ‰å®šä¹‰çš„æµ‹è¯•
åœ¨å®šä¹‰æµ‹è¯•ä¹‹åï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ RUN_ALL_TESTS()æ¥è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼Œå¦‚æœæ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡äº†ï¼Œå®ƒä¼šè¿”å› 0ã€‚æ³¨æ„ï¼ŒRUNN_ALL_TESTS()ä¼šè¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼Œå“ªæ€•è¿™äº›æµ‹è¯•æ¥æºäºä¸åŒçš„æµ‹è¯•å¥—ä»¶ã€ä¸åŒçš„æºæ–‡ä»¶ã€‚</p>
<h3 id="è¿è¡Œæµ‹è¯•çš„è¿‡ç¨‹httpswwwcnblogscomjinyunshaobingp16717123html1753488367">è¿è¡Œæµ‹è¯•çš„è¿‡ç¨‹
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#1753488367"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<ul>
<li>ä¿å­˜æ‰€æœ‰ googletest æ ‡å¿—çš„çŠ¶æ€</li>
<li>ä¸ºç¬¬ä¸€ä¸ªæµ‹è¯•åˆ›å»ºæµ‹è¯•å¤¹å…·å¯¹è±¡ï¼Œé€šè¿‡ SetUp()åˆå§‹åŒ–</li>
<li>ä½¿ç”¨æµ‹è¯•å¤¹å…·å¯¹è±¡è¿è¡Œæµ‹è¯•</li>
<li>æµ‹è¯•ç»“æŸï¼Œè°ƒç”¨ TearDown()æ¸…ç†å¤¹å…·ç„¶åé”€æ¯å¤¹å…·å¯¹è±¡</li>
<li>æ¢å¤æ‰€æœ‰ googletest æ ‡å¿—çš„çŠ¶æ€</li>
<li>å¯¹ä¸‹ä¸€ä¸ªæµ‹è¯•é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œç›´åˆ°æ‰€æœ‰æµ‹è¯•éƒ½è¿è¡Œç»“æŸ
æ³¨æ„ï¼šä¸èƒ½å¿½ç•¥ RUN_ALL_TESTS()çš„è¿”å›å€¼ï¼Œå¦åˆ™ä¼šäº§ç”Ÿç¼–è¯‘å™¨é”™è¯¯ã€‚è‡ªåŠ¨åŒ–æµ‹è¯•æœåŠ¡æ ¹æ®é€€å‡ºä»£ç æ¥åˆ¤æ–­æµ‹è¯•æ˜¯å¦é€šè¿‡ï¼Œè€Œä¸æ˜¯é€šè¿‡ stdout/sederr æ¥åˆ¤æ–­ï¼Œæ‰€ä»¥ main()å‡½æ•°å¿…é¡»è¿”å› RUN_ALL_TESTS();</li>
</ul>
<h3 id="mainçš„ç¼–å†™httpswwwcnblogscomjinyunshaobingp16717123html1752583433">main()çš„ç¼–å†™
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#1752583433"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦è‡ªå·±ç¼–å†™ main æ–¹æ³•ï¼Œè€Œæ˜¯ç›´æ¥é“¾æ¥ gtest_main(æ³¨æ„ä¸æ˜¯ gtest)ï¼Œè¿™ä¸ªé“¾æ¥åº“å®šä¹‰äº†åˆé€‚çš„æ¥å…¥ç‚¹ä¼šå¸®æˆ‘ä»¬è¿›è¡Œæµ‹è¯•
å¦‚æœæƒ³è‡ªè¡Œä¹¦å†™ main æ–¹æ³•ï¼Œå®ƒéœ€è¦è¿”å› RUN_ALL_TESTS()çš„è¿”å›å€¼</p>
<pre><code class="language-cpp">int main(int argc, char **argv) {
  ::testing::InitGoogleTest(argc, argv);
  return RUN_ALL_TESTS();
}

</code></pre>
<p>åœ¨è¿™æ®µä»£ç é‡Œï¼ŒInitGoogleTest()çš„ä½œç”¨æ˜¯è§£æå‘½ä»¤è¡Œé‡Œ GoogleTest çš„æŒ‡ä»¤å‚æ•°ï¼Œè¿™å…è®¸ç”¨æˆ·æ§åˆ¶æµ‹è¯•ç¨‹åºçš„è¡Œä¸ºã€‚å®ƒå¿…é¡»åœ¨ RUN_ALL_TESTS ä¹‹å‰è°ƒç”¨ï¼Œå¦åˆ™å‘½ä»¤è¡Œå‚æ•°ä¸ä¼šç”Ÿæ•ˆ<br>
åœ¨æ—§ç‰ˆæœ¬é‡Œï¼Œä½¿ç”¨çš„æ˜¯ ParseGUnitFlags()ï¼Œä½†æ˜¯ç›®å‰å®ƒå·²ç»è¢«å¼ƒç”¨ï¼Œéœ€è¦ä½¿ç”¨ InitGoogleTest()</p>
<h2 id="åç»­å¯å¡«å‘httpswwwcnblogscomjinyunshaobingp16717123html1717359307">åç»­å¯å¡«å‘
<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html#1717359307"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<p><code>gMock</code></p>
<h1 id="cgoogletest-è¿›é˜¶ä¹‹-gmock---ç¼™äº‘çƒ§é¥¼---åšå®¢å›­">ã€C++ã€‘GoogleTest è¿›é˜¶ä¹‹ gMock - ç¼™äº‘çƒ§é¥¼ - åšå®¢å›­</h1>

  <div class="admonition warning">
    <div class="admonition-header">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/></svg>
      <span>å£°æ˜</span>
    </div>
      <div class="admonition-content">
        <ul>
<li>æœ¬æ–‡ç”±æ’ä»¶
<a href="https://chromewebstore.google.com/detail/markdownload-markdown-web/pcmpcfapbekmbjjkdalcgopdkipoggdi?pli=1"  target="_blank" rel="noopener noreferrer" >Markdown Web Clipper</a>
è‡ªåŠ¨æå–ç½‘é¡µæ­£æ–‡è€Œæ¥ï¼Œå¹¶æœªè·å–åŸä½œè€…æˆæƒï¼</li>
<li>æœ¬æ–‡ä»…ä½œä¸ªäººå­˜æ¡£å­¦ä¹ ä½¿ç”¨ï¼Œå¦‚æœ‰ä»»ä½•ç–‘é—®/éœ€æ±‚è¯·æŸ¥çœ‹
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html"  target="_blank" rel="noopener noreferrer" >åŸæ–‡</a>
ï¼</li>
<li>å¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»æœ¬äººç«‹åˆ»åˆ é™¤ï¼</li>
<li>åŸæ–‡é“¾æ¥: 
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html"  target="_blank" rel="noopener noreferrer" >ã€C++ã€‘GoogleTest è¿›é˜¶ä¹‹ gMock</a>
</li>
</ul>
      </div>
  </div>
<hr>
<p>å½“æˆ‘ä»¬å»å†™æµ‹è¯•æ—¶ï¼Œæœ‰äº›æµ‹è¯•å¯¹è±¡å¾ˆå•çº¯ç®€å•ï¼Œä¾‹å¦‚ä¸€ä¸ªå‡½æ•°å®Œå…¨ä¸ä¾èµ–äºå…¶ä»–çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå°±åªéœ€è¦éªŒè¯å…¶è¾“å…¥è¾“å‡ºæ˜¯å¦ç¬¦åˆé¢„æœŸå³å¯ã€‚</p>
<p>ä½†æ˜¯å¦‚æœæµ‹è¯•å¯¹è±¡å¾ˆå¤æ‚æˆ–è€…ä¾èµ–äºå…¶ä»–çš„å¯¹è±¡å‘¢ï¼Ÿä¾‹å¦‚ä¸€ä¸ªå‡½æ•°ä¸­éœ€è¦è®¿é—®æ•°æ®åº“æˆ–è€…æ¶ˆæ¯é˜Ÿåˆ—ï¼Œé‚£ä¹ˆè¦æƒ³æŒ‰ç…§ä¹‹å‰çš„æ€è·¯å»æµ‹è¯•å°±å¿…é¡»åˆ›å»ºå¥½æ•°æ®åº“å’Œæ¶ˆæ¯é˜Ÿåˆ—çš„å®¢æˆ·ç«¯å®ä¾‹ï¼Œç„¶åæ”¾åœ¨è¯¥å‡½æ•°å†…ä½¿ç”¨ã€‚å¾ˆå¤šæ—¶å€™è¿™ç§æ“ä½œæ˜¯å¾ˆéº»çƒ¦çš„ï¼Œæ­¤æ—¶ Mock Object å°±èƒ½å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¸€ä¸ª Mock Object å®ç°ä¸çœŸå®å¯¹è±¡ç›¸åŒçš„æ¥å£ï¼Œå®ƒå¯ä»¥æ›¿ä»£çœŸå®å¯¹è±¡å»ä½¿ç”¨ï¼Œè€Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯åˆ¶å®šå¥½è¯¥ Mock Object çš„è¡Œä¸ºï¼ˆè°ƒç”¨å¤šå°‘æ¬¡ã€å‚æ•°ã€è¿”å›å€¼ç­‰ç­‰ï¼‰</p>
<p>å‚è€ƒæ–‡æ¡£ï¼š<br>

<a href="https://google.github.io/googletest/gmock_for_dummies.html"  target="_blank" rel="noopener noreferrer" >gMock å®˜æ–¹æ–‡æ¡£</a>
</p>
<h2 id="å®‰è£…-gmockhttpswwwcnblogscomjinyunshaobingp16804309html3903036668">å®‰è£… gMock
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#3903036668"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<p>gMock ç°åœ¨ä¸ gTest æ˜¯ç»„åˆä½¿ç”¨çš„å…³ç³»ï¼Œå› æ­¤åœ¨å®‰è£… gTest æ—¶é»˜è®¤å°±ä¼šå®‰è£… gMockï¼Œå…·ä½“çš„å®‰è£…æ–¹å¼è§ github ä¸Šçš„å®˜æ–¹è¯´æ˜<br>

<a href="https://github.com/google/googletest/tree/main/googletest"  target="_blank" rel="noopener noreferrer" >https://github.com/google/googletest/tree/main/googletest</a>
</p>
<h2 id="ä½¿ç”¨-gmock-çš„åŸºæœ¬æ€è·¯httpswwwcnblogscomjinyunshaobingp16804309html3770826731">ä½¿ç”¨ gMock çš„åŸºæœ¬æ€è·¯
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#3770826731"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<ul>
<li>é¦–å…ˆï¼Œä½¿ç”¨ä¸€äº›ç®€å•çš„ gMock å®æ¥æè¿°æƒ³è¦æ¨¡æ‹Ÿçš„æ¥å£ï¼Œå®ƒä»¬ä¼šå®ç°ä½ çš„ mock ç±»</li>
<li>ç„¶åï¼Œåˆ›å»ºä¸€äº› mock object ç„¶åä½¿ç”¨ gMock æä¾›çš„è¯­æ³•æŒ‡å®šå¥½å®ƒä»¬çš„è¡Œä¸º</li>
<li>æœ€åï¼Œè¿è¡Œéœ€è¦ä½¿ç”¨è¿™äº› mock object çš„ä»£ç ï¼ŒgMock ä¼šåœ¨ mock object çš„è¡Œä¸ºä¸ç¬¦åˆé¢„æœŸçš„æ—¶å€™å‘ç°å¹¶æŒ‡å‡º</li>
</ul>
<h2 id="gmock-å¿«é€Ÿå…¥é—¨">gMock å¿«é€Ÿå…¥é—¨</h2>
<p>å‡è®¾æˆ‘ä»¬åœ¨åšä¸€ä¸ªç”¨æˆ·çš„è´¦æˆ·ç³»ç»Ÿï¼Œä¸€ä¸ªç”¨æˆ·ä¼šæœ‰ä¸€ä¸ªè´¦æˆ·ï¼Œç”¨æˆ·æä¾›æ¥å£ salaryï¼Œè´¦æˆ·æä¾›æ¥å£ add å’Œ getAccountï¼Œåœ¨ç”¨æˆ·çš„ salary å†…ä¼šè°ƒç”¨è´¦æˆ·çš„ add å’Œ getAccount æ¥å£<br>
ç‰¹åˆ«æ³¨æ„ï¼šæ­¤å¤„çš„è´¦æˆ·å°±æ˜¯æˆ‘ä»¬è¦ mock çš„å¯¹è±¡ï¼Œå®ƒæ˜¯ç”¨æˆ·çš„ä¸€ä¸ªä¾èµ–ã€‚è¦æƒ³æ¨¡æ‹Ÿå®ƒï¼Œå®ƒå†…éƒ¨å¿…é¡»æœ‰è™šææ„å‡½æ•°ï¼Œå„ä¸ªæ¥å£ä¹Ÿå»ºè®®æ˜¯è™šå‡½æ•°ä¹ƒè‡³çº¯è™šå‡½æ•°ã€‚è¿™é‡Œæˆ‘çš„ç†è§£æ˜¯ï¼Œå®é™…ä¸Š mock object æ˜¯å¯¹çœŸå®å¯¹è±¡çš„ä»£ç†/æ›¿æ¢ï¼Œåœ¨ä»£ç†æ¨¡å¼ä¸­æ¯”è¾ƒå¸¸è§çš„ä¸€ç§åšæ³•å°±æ˜¯ä»£ç†ç±»å’Œè¢«ä»£ç†ç±»ç»§æ‰¿è‡ªåŒä¸€ä¸ªçˆ¶ç±»/æ¥å£</p>
<h2 id="åŸºæœ¬æ ·ä¾‹httpswwwcnblogscomjinyunshaobingp16804309html3275895804">åŸºæœ¬æ ·ä¾‹
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#3275895804"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<h3 id="userhttpswwwcnblogscomjinyunshaobingp16804309html2659273203">User
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#2659273203"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<pre><code>#ifndef USER_H
#define USER_H
#include iostream
#include &quot;account.h&quot;

class User{
public:
    /// @brief Userç±»çš„å¯¹è±¡ä¾èµ–äºAccountçš„å¯¹è±¡
    /// @param account Accountå®ä¾‹ï¼Œè¢«Useræ‰€ä¾èµ–
    User(Account *account){
        account_ = account;
    }
    /// @brief æ¨¡æ‹Ÿå‘å·¥èµ„çš„åœºæ™¯
    /// @param money å‘çš„é’±æ•°
    /// @return è´¦æˆ·ä½™é¢
    int salary(int money){
        account_-add(money);
        return account_-getAccount();
    }

private:
    Account *account_;
};

#endif //USER_H

</code></pre>
<h3 id="accounthttpswwwcnblogscomjinyunshaobingp16804309html3825167995">Account
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#3825167995"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<pre><code>#ifndef ACCOUNT_H
#define ACCOUNT_H

class Account
{
public:
    virtual ~Account() {}
    virtual void add(int money) = 0;
    virtual int getAccount() = 0;
};

#endif //ACCOUNT_H

</code></pre>
<h2 id="mock-ç±»ç¼–å†™httpswwwcnblogscomjinyunshaobingp16804309html3708843258">mock ç±»ç¼–å†™
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#3708843258"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<p>æˆ‘ä»¬è¦ mock çš„æ˜¯ Account çš„ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä¹¦å†™ mock ç±»å®ç° Account æ¥å£</p>
<pre><code>#ifndef MOCK_ACCOUNT_H
#define MOCK_ACCOUNT_H
#include &quot;account.h&quot;
#include gmock/gmock.h

class MockAccount : public Account
{
public:
    MOCK_METHOD(void, add, (int money), (override));
    MOCK_METHOD(int, getAccount, (), (override));
};

#endif // MOCK_ACCOUNT_H

</code></pre>
<p>å…¶ä¸­çš„å…³é”®éƒ¨åˆ†åœ¨äº MOCK_METHODï¼Œå¾ˆå¤šè€çš„æ•™ç¨‹ä¸­ä¼šä½¿ç”¨ MOCK_METHOD0ã€MOCK_METHOD1&hellip;è¿™äº›å®ï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨ 0 å‚æ•°ã€1 å‚æ•°ã€2 å‚æ•°çš„æ¥å£ã€‚åœ¨æ–°çš„å®˜æ–¹æ•™ç¨‹ä¸­æ²¡æœ‰è¿™ç§å†™æ³•ï¼Œç»Ÿä¸€éƒ½æ˜¯ MOCK_METHODï¼Œå†…éƒ¨æœ‰å››ä¸ªå‚æ•°</p>
<ul>
<li>æ¥å£è¿”å›å€¼ç±»å‹</li>
<li>æ¥å£å</li>
<li>æ¥å£å½¢å‚åˆ—è¡¨ï¼Œæ³¨æ„ï¼Œå¦‚æœæœ‰æ³›å‹ï¼Œéœ€è¦å¤šåŠ ä¸€å±‚æ‹¬å·ï¼Œä¾‹å¦‚<code>MOCK_METHOD(void, funName, (int, (map&lt;int,string&gt;)),(override))</code></li>
<li>ä¸ºç”Ÿæˆçš„ mock object çš„æ–¹æ³•æ·»åŠ å…³é”®å­—ï¼ˆå¦‚æœæ˜¯ override è¿™ä¸ªå‚æ•°å…¶å®å¯ä»¥ä¸å†™ï¼Œä½†æ˜¯å¦‚æœæ¥å£æ˜¯ const çš„ï¼Œå°±å¿…é¡»å†™ const å…³é”®å­—äº†ï¼‰</li>
</ul>
<h3 id="mock-ç±»æ”¾åœ¨å“ªhttpswwwcnblogscomjinyunshaobingp16804309html4027525425">mock ç±»æ”¾åœ¨å“ª
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#4027525425"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<p>æŒ‰ç…§ google çš„å»ºè®®ï¼Œé™¤éæ•´ä¸ªæ¥å£å°±æ˜¯ä½ è‡ªå·±æŒæœ‰çš„ï¼Œå¦åˆ™ mock ç±»ä¸è¦æ”¾åœ¨ xx_test ä¸‹ï¼Œå› ä¸ºä¸€æ—¦ Account æ¥å£è¢«å®ƒçš„æ‰€æœ‰è€…æ”¹å˜ï¼ŒMockAccount ä¹Ÿå¿…é¡»æ”¹å˜æ‰èƒ½ç»§ç»­ä½¿ç”¨
ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¸åº”è¯¥ mock ä¸æ˜¯è‡ªå·±æŒæœ‰çš„æ¥å£ã€‚å¦‚æœçœŸçš„éœ€è¦ mock ä¸æ˜¯è‡ªå·±æŒæœ‰çš„ï¼Œmock å¯¹è±¡çš„ç›®å½•æˆ–è€… testing çš„å­ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª.h æ–‡ä»¶å’Œä¸€ä¸ª cc_library with testonly=trueï¼Œè¿™æ ·ä¸€æ¥ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªåœ°æ–¹å®šä¹‰çš„ mock ç±»</p>
<h2 id="mock-çš„ä½¿ç”¨httpswwwcnblogscomjinyunshaobingp16804309html3283843717">mock çš„ä½¿ç”¨
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#3283843717"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<p>åˆ›å»ºå¥½ mock ç±»ä¹‹åï¼Œè¦ä½¿ç”¨å®ƒä¸€èˆ¬åˆ†ä»¥ä¸‹å‡ æ­¥</p>
<ul>
<li>åˆ›å»º Mock Object</li>
<li>è§„å®š Mock Object çš„é¢„æœŸè¡Œä¸º</li>
<li>ä½¿ç”¨ Mock Object æµ‹è¯•ä¸šåŠ¡ä»£ç ï¼Œä¸šåŠ¡ä»£ç éƒ¨åˆ†å¯ä»¥ä½¿ç”¨ gTest çš„å„ç§æ–­è¨€</li>
<li>ä¸€æ—¦ Mock Object çš„æ–¹æ³•è¢«è°ƒç”¨çš„æƒ…å†µä¸å‰é¢è§„å®šçš„é¢„æœŸè¡Œä¸ºä¸ç¬¦ï¼Œæµ‹è¯•å°±ä¼šä¸é€šè¿‡ï¼ˆåœ¨ Mock Object è¢«ææ„æ—¶ä¹Ÿä¼šå†æ¬¡æ£€æŸ¥ï¼‰
å…¶ä¸­æ¯”è¾ƒæ ¸å¿ƒä»£ç æœ‰ä¸¤éƒ¨åˆ†ï¼šè§„å®š Mock Object çš„é¢„æœŸè¡Œä¸ºå’Œä¸šåŠ¡ä»£ç æµ‹è¯•ï¼Œå‰è€…å°†ä¼šåœ¨ä¸‹é¢è¯¦ç»†å±•å¼€ï¼Œåè€…å¯ä»¥å‚è€ƒ Google Test é‚£ç¯‡æ–‡ç« 

<a href="https://www.cnblogs.com/jinyunshaobing/p/16717123.html"  target="_blank" rel="noopener noreferrer" >google test å…¥é—¨æŒ‡å—</a>
</li>
</ul>
<h3 id="æ ·ä¾‹httpswwwcnblogscomjinyunshaobingp16804309html1045523345">æ ·ä¾‹
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#1045523345"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<p>user_test.cc æ–‡ä»¶</p>
<pre><code>#include gtest/gtest.h
#include gmock/gmock.h
#include &quot;user.h&quot;
#include &quot;mock_account.h&quot;

using ::testing::AtLeast;
using ::testing::Return;

TEST(UserTest, SalaryIsOK)
{
    MockAccount mAccount;//åˆ›å»ºMock Object
    EXPECT_CALL(mAccount, add(100)).Times(AtLeast(1));
    EXPECT_CALL(mAccount, getAccount()).Times(AtLeast(1));//è§„èŒƒMock Objectçš„è¡Œä¸ºï¼Œæ­¤å¤„æ˜¯è¯´è¯¥mockå¯¹è±¡çš„getAccount()æ–¹æ³•è‡³å°‘è¢«è°ƒç”¨1æ¬¡
    User user(mAccount);//å°†Mock Obejctæ³¨å…¥åˆ°userä¸­ä½¿ç”¨ï¼ˆä¾èµ–æ³¨å…¥ï¼‰
    int res = user.salary(100);//æµ‹è¯•Userä¸šåŠ¡é€»è¾‘
    ASSERT_GE(res, 0);//gTestçš„æ–­è¨€ï¼Œreså¤§äºç­‰äº0åˆ™é€šè¿‡
}

</code></pre>
<h2 id="ç¼–è¯‘è¿è¡Œhttpswwwcnblogscomjinyunshaobingp16804309html4022897349">ç¼–è¯‘è¿è¡Œ
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#4022897349"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<p>è¿™é‡Œæˆ‘ä½¿ç”¨ CMake æ¥åšæ„å»ºï¼Œæ³¨æ„ gTest å’Œ gMock éœ€è¦ C++14 åŠä»¥ä¸Šï¼Œåœ¨é“¾æ¥æ—¶ç›´æ¥é“¾æ¥ gtest_mainï¼Œè¿™æ ·å°±ä¸éœ€è¦è‡ªå·±å†™ main æ–¹æ³•äº†</p>
<h3 id="cmakeliststxthttpswwwcnblogscomjinyunshaobingp16804309html2659422929">CMakeLists.txt
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#2659422929"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<pre><code>cmake_minimum_required(VERSION 3.14)

project(user LANGUAGES C CXX)

set(CMAKE_CXX_STANDARD 14)

enable_testing()

find_package(GTest REQUIRED)

add_executable(test_user &quot;${PROJECT_SOURCE_DIR}/user_test.cc&quot;)
target_link_libraries(test_user GTest::gtest_main gmock)

include(GoogleTest)
gtest_discover_tests(test_user)

</code></pre>
<h3 id="è¿è¡Œç»“æœhttpswwwcnblogscomjinyunshaobingp16804309html90565185">è¿è¡Œç»“æœ
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#90565185"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<pre><code>[==========] Running 1 test from 1 test suite.
[----------] Global test environment set-up.
[----------] 1 test from UserTest
[ RUN      ] UserTest.SalaryIsOK
[       OK ] UserTest.SalaryIsOK (0 ms)
[----------] 1 test from UserTest (0 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test suite ran. (0 ms total)
[  PASSED  ] 1 test.

</code></pre>
<p>æµ‹è¯•é€šè¿‡äº†</p>
<h2 id="è®¾ç½®é¢„æœŸè¡Œä¸º">è®¾ç½®é¢„æœŸè¡Œä¸º</h2>
<p>ä½¿ç”¨ Mock æœ€æ ¸å¿ƒçš„ç‚¹å°±åœ¨äºç»™ä¸€ä¸ª Mock Object è§„å®šå¥½é¢„æœŸè¡Œä¸ºã€‚è¿™éƒ¨åˆ†ä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦æ–Ÿé…Œçš„åœ°æ–¹ã€‚é¢„æœŸè¡Œä¸ºæ˜¯è®¾ç½®çš„ä¸¥æ ¼ä¸€ç‚¹è¿˜æ˜¯æ¾ä¸€ç‚¹å…¨çœ‹éœ€æ±‚ã€‚</p>
<h2 id="ä¸€èˆ¬è¯­æ³•httpswwwcnblogscomjinyunshaobingp16804309html252554791">ä¸€èˆ¬è¯­æ³•
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#252554791"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<p>åœ¨ gMock ä¸­ä½¿ç”¨ EXPECT_CALL()è¿™ä¸ªæ–­è¨€å®å»è®¾ç½®ä¸€ä¸ª Mock Object çš„é¢„æœŸè¡Œä¸º
<code>EXPECT_CALL(mock_object, mock_method(params))...</code>
å…¶ä¸­æœ‰ä¸¤ä¸ªæ ¸å¿ƒå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ mock_objectï¼Œç¬¬äºŒä¸ªæ˜¯ mock_object ä¸­çš„æ–¹æ³•ï¼Œå¦‚æœæœ‰å‚æ•°åŒæ—¶è¦æŠŠå‚æ•°ä¼ è¿›å»ï¼Œæ³¨æ„ï¼Œä¸åŒå‚æ•°çš„ mock_method å¯ä»¥è®¤ä¸ºæ˜¯ä¸åŒçš„é¢„æœŸè¡Œä¸º
&hellip;éƒ¨åˆ†å¯ä»¥å¡«å†™å¾ˆå¤šé“¾å¼è°ƒç”¨çš„é€»è¾‘æ¥æŒ‡å®šè¯¥å¯¹è±¡è¯¥æ–¹æ³•çš„è°ƒç”¨è¿è¡Œæƒ…å†µ</p>
<pre><code>using ::testing::Return;
...
EXPECT_CALL(mock_object, mock_method(params)).Times(5).WillOnce(Return(100)).WillOnce(Return(150)).WillRepeatedly(Return(200));

</code></pre>
<p>åœ¨ä»¥ä¸Šçš„æ —å­ä¸­ï¼Œä¸ºè¯¥å¯¹è±¡çš„è¯¥æ–¹æ³•æŒ‡å®šäº†å››ä¸ªé¢„æœŸè¡Œä¸ºï¼š
é¦–å…ˆå®ƒä¼šè¢«è°ƒç”¨ 5 æ¬¡ï¼Œç¬¬ä¸€æ¬¡è¿”å› 100ï¼Œç¬¬äºŒæ¬¡è¿”å› 150ï¼Œä¹‹åçš„æ¯æ¬¡éƒ½è¿”å› 200</p>
<h3 id="å…³äºæ–¹æ³•çš„å‚æ•°-paramshttpswwwcnblogscomjinyunshaobingp16804309html540123511">å…³äºæ–¹æ³•çš„å‚æ•° params
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#540123511"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<h4 id="ä¸ç¡®å®šå‚æ•°å€¼httpswwwcnblogscomjinyunshaobingp16804309html3041163831">ä¸ç¡®å®šå‚æ•°å€¼
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#3041163831"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¸æƒ³è®©å‚æ•°å€¼å˜å¾—å›ºå®šï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨::testing::_æ¥è¡¨ç¤ºä»»æ„å‚æ•°å€¼</p>
<pre><code>using ::testing::_;
...
EXPECT_CALL(mock_object, mock_method(_))...

</code></pre>
<p>å¦‚æœå‚æ•°æœ‰å¤šä¸ªï¼Œè€Œä¸”å…¨éƒ¨éƒ½æ˜¯ä¸ç¡®å®šå‚æ•°å€¼ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š
<code>EXPECT_CALL(mock_object, mock_method)...</code></p>
<h4 id="å‚æ•°å€¼éœ€è¦æ»¡è¶³æŸç§æ¡ä»¶httpswwwcnblogscomjinyunshaobingp16804309html2356712581">å‚æ•°å€¼éœ€è¦æ»¡è¶³æŸç§æ¡ä»¶
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#2356712581"  target="_blank" rel="noopener noreferrer" >#</a>
</h4>
<p>å¯¹äºä¼ å…¥ç¡®åˆ‡å‚æ•°çš„æƒ…å†µï¼Œç›¸å½“äºæ˜¯ä½¿ç”¨ Eq(100)ï¼Œä»¥ä¸‹çš„å‰ä¸¤ä¸ªå†™æ³•æ˜¯ç­‰ä»·çš„</p>
<pre><code>EXPECT_CALL(mock_object, mock_method(100))...
EXPECT_CALL(mock_object, mock_method(Eq(100)))...
EXPECT_CALL(mock_object, mock_method(Ge(50)))...//å‚æ•°å¤§äºç­‰äº50çš„æ‰€æœ‰æƒ…å†µ

</code></pre>
<p>é‚£ä¹ˆé™¤äº† Eq ä¹‹å¤–ï¼ŒgMock è¿˜æä¾›äº†å…¶ä»–çš„ä¸€äº›ï¼Œå¯ä»¥è‡ªè¡Œæ¢ç´¢</p>
<h2 id="é¢„æœŸè°ƒç”¨çš„æ¬¡æ•°httpswwwcnblogscomjinyunshaobingp16804309html2624830972">é¢„æœŸè°ƒç”¨çš„æ¬¡æ•°
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#2624830972"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<p>åœ¨é¢„æœŸè¡Œä¸ºéƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å†™ä¸Š Times(3)æ¥æŒ‡å®šå®ƒéœ€è¦è¢«è°ƒç”¨ 3 æ¬¡ï¼Œå¤šæˆ–å°‘éƒ½ä¼šå¯¼è‡´æµ‹è¯•ä¸é€šè¿‡ã€‚
AtLeast()æ˜¯åœ¨æ¬¡æ•°é¢„æœŸé‡Œæ¯”è¾ƒå¸¸ç”¨çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå¦‚æœæ˜¯ Times(3)ï¼Œé‚£æ–¹æ³•å¿…é¡»è°ƒç”¨ä¸”åªèƒ½è°ƒç”¨ 3 æ¬¡ï¼Œä½†æ˜¯å¦‚æœæ˜¯ Times(AtLeast(3))ï¼Œé‚£ä¹ˆå°±æ˜¯è‡³å°‘è°ƒç”¨ 3 æ¬¡çš„æ„æ€äº†ã€‚
æˆ‘ä»¬ä¹Ÿå¯ä»¥çœç•¥ Times()ï¼Œæ­¤æ—¶ gMock ä¼šé»˜è®¤æ ¹æ®æˆ‘ä»¬å†™çš„é“¾å¼è°ƒç”¨æƒ…å†µæ·»åŠ  Times()ï¼Œå…·ä½“è§„åˆ™è§ä¸‹é¢çš„éƒ¨åˆ†ã€‚</p>
<p>å…³äºæ¬¡æ•°çš„é¢„æœŸï¼Œæ ¸å¿ƒçš„æ–¹æ³•æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ WillOnce()å’Œ WillRepeatedly()ï¼Œå‰è€…è¡¨ç¤ºè°ƒç”¨ä¸€æ¬¡ï¼Œåè€…è¡¨ç¤ºé‡å¤è°ƒç”¨ï¼Œå®ƒä»¬å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œä½¿ç”¨çš„å…·ä½“è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>å¦‚æœæ²¡æœ‰ WillOnce å’Œ WillRepeatedly()ï¼Œåˆ™é»˜è®¤æ·»åŠ  Times(1)</li>
<li>å¦‚æœæœ‰ n ä¸ª WillOnceï¼Œæ²¡æœ‰ WillRepeatedly()ï¼Œåˆ™é»˜è®¤æ·»åŠ  Times(n)</li>
<li>å¦‚æœæœ‰ n ä¸ª WillOnceï¼Œæœ‰ä¸€ä¸ª WillRepeatedly()ï¼Œåˆ™é»˜è®¤æ·»åŠ  Times(AtLeast(n))ï¼Œè¿™æ„å‘³ç€ WillRepeatedly å¯ä»¥åŒ¹é…è°ƒç”¨ 0 æ¬¡çš„æƒ…å†µ</li>
</ul>
<h2 id="é¢„æœŸå‘ç”Ÿçš„è¡Œä¸ºhttpswwwcnblogscomjinyunshaobingp16804309html3100169290">é¢„æœŸå‘ç”Ÿçš„è¡Œä¸º
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#3100169290"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<p>ä¸€ä¸ª mock object çš„æ‰€æœ‰æ–¹æ³•ä¸­éƒ½æ²¡æœ‰å…·ä½“çš„å®ç°ä½“ï¼Œé‚£ä¹ˆå®ƒçš„è¿”å›å€¼æƒ…å†µæ˜¯æ€ä¹ˆæ ·è®¾å®šé¢„æœŸçš„å‘¢ï¼Ÿ
é»˜è®¤æƒ…å†µä¸‹æˆ‘ä»¬å¦‚æœä¸è®¾å®šè¿”å›å€¼é¢„æœŸï¼Œä¹Ÿä¼šæœ‰é»˜è®¤çš„è¿”å›å€¼ï¼ˆåªæ˜¯æˆ‘ä»¬ä¸ä½¿ç”¨è€Œå·²ï¼‰ï¼Œbool ä¼šè¿”å› falseï¼Œint ç­‰ç­‰çš„ä¼šè¿”å› 0.
å¦‚æœéœ€è¦å®ƒæœ‰æŒ‡å®šçš„é¢„æœŸè¿”å›å€¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¬¡æ•°é¢„æœŸä¸­åŠ å…¥è¿”å›å€¼é¢„æœŸ</p>
<pre><code>using ::testing::Return;
...
EXPECT_CALL(mock_object, mock_method(params))
.Times(5)
.WillOnce(Return(100))
.WillOnce(Return(150))
.WillRepeatedly(Return(200));

</code></pre>
<p>åœ¨ä»¥ä¸Šçš„æ —å­ä¸­ï¼Œä¸ºè¯¥å¯¹è±¡çš„è¯¥æ–¹æ³•æŒ‡å®šäº†å››ä¸ªé¢„æœŸè¡Œä¸ºï¼š
é¦–å…ˆå®ƒä¼šè¢«è°ƒç”¨ 5 æ¬¡ï¼Œç¬¬ä¸€æ¬¡è¿”å› 100ï¼Œç¬¬äºŒæ¬¡è¿”å› 150ï¼Œä¹‹åçš„æ¯æ¬¡éƒ½è¿”å› 200
å¦‚æœå»æ‰ Times(5)ï¼Œé‚£å°±æ˜¯ç¬¬ä¸€æ¬¡è¿”å› 100ï¼Œç¬¬äºŒæ¬¡è¿”å› 150ï¼Œä¹‹åæ¯æ¬¡éƒ½è¿”å› 200ï¼Œè°ƒç”¨æ¬¡æ•°ä¸å°‘äº 2 æ¬¡ï¼ˆWillRepeatedly å¯ä»¥è°ƒç”¨ 0 æ¬¡ï¼‰</p>
<h2 id="é¢„æœŸå‘ç”Ÿé¡ºåºhttpswwwcnblogscomjinyunshaobingp16804309html3540544923">é¢„æœŸå‘ç”Ÿé¡ºåº
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#3540544923"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è®¾å®šå¥½ä¸€ä¸ª mock å¯¹è±¡çš„å¤šä¸ªé¢„æœŸè¡Œä¸ºæ—¶ï¼Œæ˜¯ä¸å…³å¿ƒå®ƒä»¬çš„å‘ç”Ÿé¡ºåºçš„ã€‚ä¾‹å¦‚ä»¥ä¸‹ä»£ç ä¸­ï¼Œå…ˆè°ƒç”¨ PenDown()æˆ–è€…å…ˆè°ƒç”¨äº† Forward(100)éƒ½æ˜¯æ— æ‰€è°“çš„ï¼Œéƒ½èƒ½é€šè¿‡æµ‹è¯•ï¼š</p>
<pre><code>EXPECT_CALL(turtle, PenDown());
EXPECT_CALL(turtle, Forward(100));

</code></pre>
<p>é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³æŒ‡å®šé¢„æœŸå‘ç”Ÿé¡ºåºï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»º InSequence å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åˆ›å»ºå¤„çš„ä»£ç å—ï¼ˆscopeï¼‰å†…çš„æ‰€æœ‰é¢„æœŸè¡Œä¸ºéƒ½å¿…é¡»æŒ‰ç…§å£°æ˜é¡ºåºå‘ç”Ÿã€‚</p>
<pre><code>using ::testing::InSequence;
...
TEST(FooTest, DrawsLineSegment) {
  ...
  {
    InSequence seq;

    EXPECT_CALL(turtle, PenDown());
    EXPECT_CALL(turtle, Forward(100));
    EXPECT_CALL(turtle, PenUp());
  }
  Foo();
}

</code></pre>
<h2 id="ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹httpswwwcnblogscomjinyunshaobingp16804309html1878194304">ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#1878194304"  target="_blank" rel="noopener noreferrer" >#</a>
</h2>
<h3 id="é¢„æœŸè¡Œä¸ºçš„ä¸€æ¬¡æ€§å†™å…¥httpswwwcnblogscomjinyunshaobingp16804309html322437472">é¢„æœŸè¡Œä¸ºçš„ä¸€æ¬¡æ€§å†™å…¥
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#322437472"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<p>EXPECT_CALL()çš„é“¾å¼è°ƒç”¨ä¸­æ‰€æœ‰é¢„æœŸéƒ½ä¼šä¸€æ¬¡æ€§å†™å…¥ï¼Œè¿™æ„å‘³ç€ä¸è¦åœ¨é“¾å¼è°ƒç”¨ä¸­å†™è¿ç®—ï¼Œå¯èƒ½ä¸ä¼šæ»¡è¶³é¢„æœŸéœ€æ±‚ã€‚ä¸¾ä¸ªæ —å­ï¼Œä»¥ä¸‹å¹¶ä¸èƒ½åŒ¹é…è¿”å› 100ï¼Œ101ï¼Œ102&hellip;è€Œæ˜¯åªåŒ¹é…è¿”å› 100 çš„æƒ…å†µï¼Œå› ä¸º++æ˜¯åœ¨é¢„æœŸè¡Œä¸ºè¢«è®¾å®šå¥½ä¹‹åæ‰å‘ç”Ÿ</p>
<pre><code>using ::testing::Return;
...
int n = 100;
EXPECT_CALL(turtle, GetX())
    .Times(4)
    .WillRepeatedly(Return(n++));

</code></pre>
<h3 id="mock-å¯¹è±¡æ–¹æ³•çš„é¢„æœŸè¡Œä¸ºå¤šé‡å®šä¹‰httpswwwcnblogscomjinyunshaobingp16804309html169742846">mock å¯¹è±¡æ–¹æ³•çš„é¢„æœŸè¡Œä¸ºå¤šé‡å®šä¹‰
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#169742846"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<p>åœ¨å‰é¢ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„éƒ½æ˜¯å•å¯¹è±¡å•æ–¹æ³•ä»…æœ‰ 1 ç§é¢„æœŸè¡Œä¸ºå®šä¹‰çš„æƒ…å†µï¼Œå¦‚æœå®šä¹‰äº†å¤šä¸ªå‘¢ï¼Ÿä¾‹å¦‚ï¼š</p>
<pre><code>using ::testing::_;
...
EXPECT_CALL(turtle, Forward(_));  // #1
EXPECT_CALL(turtle, Forward(10))  // #2
    .Times(2);

</code></pre>
<p>å‡å¦‚æˆ‘ä»¬åœ¨åé¢è°ƒç”¨äº†ä¸‰æ¬¡ Forwar(10)ï¼Œé‚£ä¹ˆæµ‹è¯•ä¼šæŠ¥é”™ä¸é€šè¿‡ã€‚å¦‚æœè°ƒç”¨äº†ä¸¤æ¬¡ Forward(10)ï¼Œä¸€æ¬¡ Forward(20)ï¼Œé‚£ä¹ˆæµ‹è¯•ä¼šé€šè¿‡ã€‚</p>
<h3 id="é¢„æœŸè¡Œä¸ºç²˜è¿é—®é¢˜httpswwwcnblogscomjinyunshaobingp16804309html1477489468">é¢„æœŸè¡Œä¸ºç²˜è¿é—®é¢˜
<a href="https://www.cnblogs.com/jinyunshaobing/p/16804309.html#1477489468"  target="_blank" rel="noopener noreferrer" >#</a>
</h3>
<p>gMock ä¸­çš„é¢„æœŸè¡Œä¸ºé»˜è®¤æ˜¯ç²˜è¿çš„ï¼Œå®ƒä»¬ä¼šä¸€ç›´ä¿æŒå­˜æ´»çŠ¶æ€ï¼ˆå“ªæ€•å®ƒæ‰€è§„å®šçš„é¢„æœŸè¡Œä¸ºå·²ç»å®Œå…¨è¢«åŒ¹é…è¿‡äº†ï¼‰
ä¾‹å¦‚ä»¥ä¸‹çš„æƒ…å†µå¯èƒ½ä¼šå‡ºé”™ï¼Œè¿™ç§å†™æ³•ä¸‹å¯èƒ½æœ€åˆæƒ³çš„æ˜¯è¿”å› 50ã€40ã€30ã€20ã€10 çš„è°ƒç”¨å„ä¸€æ¬¡ï¼Œä½†æ˜¯å‘ç”Ÿè°ƒç”¨æ—¶å°±æŠ¥é”™äº†ï¼ˆä¾‹å¦‚ç¬¬ä¸€æ¬¡è°ƒç”¨è¿”å› 10ï¼Œè€Œç¬¬äºŒæ¬¡è°ƒç”¨è¿”å› 20 æ—¶ï¼Œé¢„æœŸè¿”å› 10 çš„é‚£ä¸ªä¹Ÿè¿˜å­˜æ´»ç€ä¼šæŠ¥é”™(ä¸æ»¡è¶³ Once äº†)ï¼‰</p>
<pre><code>using ::testing::Return;
...
for (int i = 5; i  0; i--) {
  EXPECT_CALL(turtle, GetX())
      .WillOnce(Return(10*i));
}

</code></pre>
<p>æˆ‘çš„ç†è§£ï¼šæ‰€è°“é¢„æœŸè¡Œä¸º(Expectations)ï¼Œå®ƒæ‰€é’ˆå¯¹çš„æ˜¯**<em>ä¸€ä¸ª Mock å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•åœ¨æŸä¸€ç§å‚æ•°</em>**æƒ…å†µä¸‹çš„è¡Œä¸ºï¼Œå¦‚æœä¸æ˜¾å¼çš„å£°æ˜è®©å®ƒåœ¨è¢«æ»¡è¶³åé€€ä¼‘ï¼Œå®ƒä¼šä¸€ç›´å­˜æ´»ï¼Œä¸€ç›´å¹²æ´»&hellip;
è¦æƒ³è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œå¯ä»¥æ˜¾å¼çš„å£°æ˜é¥±å’Œé€€ä¼‘</p>
<pre><code>using ::testing::Return;
...
for (int i = n; i  0; i--) {
  EXPECT_CALL(turtle, GetX())
      .WillOnce(Return(10*i))
      .RetiresOnSaturation();
}

</code></pre>
<p>åœ¨ä»¥ä¸Šè¿™ç§å†™æ³•ä¸‹ï¼Œæ¯ä¸ª.WillOnce()ä¸€æ—¦è¢«æ»¡è¶³å°±ä¼šé€€ä¼‘ï¼Œåé¢å‘ç”Ÿäº†ä»€ä¹ˆå®ƒä¸ä¼šå»ç®¡äº†ï¼Œä¹Ÿå°±ä¸ä¼šæŠ¥é”™äº†
å½“ç„¶è¿™ä¹Ÿå¯ä»¥ç»“åˆå‰é¢çš„é¢„æœŸå‘ç”Ÿé¡ºåºæ¥å†™ï¼Œä»¥ä¸‹çš„å†™æ³•æ„å‘³ç€ç¬¬ä¸€æ¬¡è°ƒç”¨è¿”å› 10ï¼Œç¬¬äºŒæ¬¡è¿”å› 20&hellip;..</p>
<pre><code>using ::testing::InSequence;
using ::testing::Return;
...
{
  InSequence s;

  for (int i = 1; i = n; i++) {
    EXPECT_CALL(turtle, GetX())
        .WillOnce(Return(10*i))
        .RetiresOnSaturation();
  }
}

</code></pre>
<h2 id="åç»­å¯å¡«å‘">åç»­å¯å¡«å‘</h2>
<p>gMock è¿›é˜¶æŒ‡å—</p>

</main>

<style>
    

    

    body {
        margin-right: 280px;
    }

    @media (max-width: 768px) {
        body {
            margin-right: 0;
        }
    }

    

     
    .article-meta {
        text-align: center;
        text-decoration: none;
        background: #efefef;
        padding: 1px;
        border-radius: 5px;
    }

    .article-meta-title {
        font-size: 2.2rem;
    }

    .article-meta-info {
        color: #666;
        font-size: 1.1rem;
        margin: -0.6rem 0 0.2rem 10px;
        text-align: left;
    }

    .article-meta-info a {
        color: inherit;
        text-decoration: none;
        transition: color 0.3s ease;
    }
</style>



<h1 style="font-size: 1.2rem; margin: 2.5rem 0 0.1rem 0;">Comment</h1>
<div class="cusdis-comments">
  <div id="cusdis_thread"
    data-host="https://cusdis.com"
    data-app-id=697d528d-b618-4ee1-a6fe-403c81a646ac
    data-page-id="7d692156e7d8d7bd6c2c82030edfe11b"
    data-page-url="https://kaikaixixi.xyz/%E8%BD%AC%E8%BD%BD/2025/04/16/googletest%E4%B8%8Egmock%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/"
    data-page-title="GoogleTestä¸gMockè¿›é˜¶æŒ‡å— | [è½¬è½½](https://www.cnblogs.com/jinyunshaobing/p/16804309.html)"
  ></div>
  <script async defer src="https://cdn.jsdelivr.net/gh/captainwc/cdn-release/website/cusdis/cusdis.es.min.js"></script>
</div>

<style>
.cusdis-comments {
  border-top: 2px dashed #cfcfcf;
  padding-top: 1.3rem;
}

#cusdis_thread iframe {
  min-height: 500px !important;
  overflow: visible !important;
}
</style>


<footer>
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
  <script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/captainwc/cdn-release/website/js/auto-render.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/captainwc/cdn-release/website/js/math-code.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/captainwc/cdn-release/website/js/render-katex.min.js"></script>

  <script src="https://cdn.jsdelivr.net/gh/captainwc/cdn-release/website/js/center-img.min.js"></script>

  

<div id="menuBtnContainer">
    
    <button id="menuBtn"><i class="fa-solid fa-screwdriver-wrench"></i></button>

    
    <button id="backToBottomBtn" class="menu-popup-btn top-btn"><i class="fa-solid fa-square-caret-down"></i></button>
    <button id="backToTopBtn" class="menu-popup-btn top-btn"><i class="fa-solid fa-square-caret-up"></i></button>

    
    <div class="menu-popup-btn edit-btn">
        <a href='https://github.com/captainwc/captainwc.github.io/edit/main/content/%e7%bd%91%e9%a1%b5%e5%89%aa%e8%97%8f/GoogleTest%e4%b8%8eGMock%e8%bf%9b%e9%98%b6%e6%8c%87%e5%8d%97.md'
            target="_blank" rel="noopener">
            <i class="fa-solid fa-square-pen"></i>
        </a>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var menuBtn = document.getElementById('menuBtn');
        var menuBtnContainer = document.getElementById('menuBtnContainer');
        var backToTopBtn = document.getElementById('backToTopBtn');
        var backToBottomBtn = document.getElementById('backToBottomBtn');
        var popupBtns = document.querySelectorAll('.menu-popup-btn');
        var hoverTimeout;

        
        menuBtnContainer.classList.add('visible');

        
        function showPopupBtns() {
            clearTimeout(hoverTimeout);
            menuBtnContainer.classList.add('active');
        }

        
        function hidePopupBtns() {
            hoverTimeout = setTimeout(function() {
                menuBtnContainer.classList.remove('active');
            }, 300);
        }

        
        menuBtnContainer.addEventListener('mouseenter', showPopupBtns);
        menuBtnContainer.addEventListener('mouseleave', hidePopupBtns);

        
        menuBtn.addEventListener('click', function() {
            if (menuBtnContainer.classList.contains('active')) {
                menuBtnContainer.classList.remove('active');
            } else {
                showPopupBtns();
            }
        });

        
        backToTopBtn.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        
        backToBottomBtn.addEventListener('click', function() {
            window.scrollTo({
                top: document.body.scrollHeight,
                behavior: 'smooth'
            });
        });
    });
</script>

<style>
     
    #menuBtnContainer {
        position: fixed;
        right: 20px;
        bottom: 20px;
        z-index: 999;
        opacity: 0.6;
        visibility: visible;
        transition: opacity 0.3s;
    }

    #menuBtnContainer:hover {
        opacity: 1;
    }

     
    #menuBtn {
        border-radius: 8px;
        border: none;
        color: #aaa;
        font-family: "Maple Mono NF CN";
        font-size: 1.2rem;
        transition: background 0.3s;
        cursor: pointer;
        background: #EFEFEF;
        z-index: 1000;
        position: relative;
    }

    #menuBtn:hover {
        background: #BEC2B3;
        color: #666;
    }

     
    .menu-popup-btn {
        position: absolute;
        opacity: 0;
        visibility: hidden;
        border-radius: 8px;
        border: none;
        color: #aaa;
        font-family: "Maple Mono NF CN";
        font-size: 1.3rem;
        transition: all 0.3s ease;
        background: #EFEFEF;
        cursor: pointer;
        z-index: 999;
    }

     
    .menu-popup-btn.top-btn {
        right: 0;
        transform: translateY(0) scale(0.8);
    }

     
    .menu-popup-btn.edit-btn {
        bottom: 0;
        transform: translateX(0) scale(0.8);
        padding: 1px 6.6px 0px 6.6px;
    }

    .menu-popup-btn.edit-btn a {
        color: #ccc;
        text-decoration: none;
        background: none !important;
        transition: opacity 0.2s;
        padding: 0;
        margin: 0;
    }

     
    #menuBtnContainer.active .menu-popup-btn {
        opacity: 1;
        visibility: visible;
    }

     
    #menuBtnContainer.active #backToBottomBtn {
        transform: translateY(-60px) scale(1);
    }

     
    #menuBtnContainer.active #backToTopBtn {
        transform: translateY(-110px) scale(1);
    }

     
    #menuBtnContainer.active .edit-btn {
        transform: translateX(-60px) scale(1);
    }

     
    .menu-popup-btn:hover,
    .menu-popup-btn.edit-btn:hover {
        background: #BEC2B3;
        color: #666;
    }

    .menu-popup-btn.edit-btn:hover a {
        color: #666;
    }

     
    @media (max-width: 768px) {
        #menuBtnContainer {
            right: 15px;
            bottom: 15px;
        }

        #menuBtnContainer.active #backToBottomBtn {
            transform: translateY(-50px) scale(1);
        }

        #menuBtnContainer.active #backToTopBtn {
            transform: translateY(-90px) scale(1);
        }

        #menuBtnContainer.active .edit-btn {
            transform: translateX(-50px) scale(1);
        }
    }
</style>



  <script>
  document.addEventListener('DOMContentLoaded', function() {
    
    document.querySelectorAll('ul').forEach(ul => {
      
      const isTodoList = Array.from(ul.children).some(li => {
        return li.innerHTML.includes('type="checkbox"')
      });

      if (isTodoList) {
        
        const todolistContainer = document.createElement('div');
        todolistContainer.className = 'todolist';

        

        
        ul.querySelectorAll('li').forEach(li => {
          const todoItemDiv = document.createElement('div');
          todoItemDiv.className = 'todo-item';

          
          const isChecked = li.innerHTML.includes('checked');
          const content = li.innerHTML
            .replace(/<input[^>]+>/g, '') 
            .trim();

          
          const checkedIcon = `<svg t="1742522457277" class="todo-item-checked-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12342"><path d="M512 938.688A426.624 426.624 0 1 1 512 85.376a426.624 426.624 0 0 1 0 853.312z m0-85.312A341.312 341.312 0 1 0 512 170.688a341.312 341.312 0 0 0 0 682.688z m-42.56-170.688L288.448 501.632l60.288-60.288L469.44 561.92l241.28-241.28 60.416 60.288-301.696 301.696z" p-id="12343"></path></svg>`;
          const uncheckedIcon = `<svg t="1742522354856" class="todo-item-unchecked-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11882"><path d="M512 938.666667C276.352 938.666667 85.333333 747.648 85.333333 512S276.352 85.333333 512 85.333333s426.666667 191.018667 426.666667 426.666667-191.018667 426.666667-426.666667 426.666667z m0-85.333334a341.333333 341.333333 0 1 0 0-682.709333A341.333333 341.333333 0 0 0 512 853.333333z" p-id="11883"></path></svg>`;

          
          todoItemDiv.innerHTML = `
            <span class="todo-item-checkbox">
              ${isChecked ? checkedIcon : uncheckedIcon}
            </span>
            <span class="todo-item-content">
              ${isChecked ? `<del>${content}</del>` : content}
            </span>
          `;

          
          todolistContainer.appendChild(todoItemDiv);
        });

        
        ul.parentNode.replaceChild(todolistContainer, ul);
      }
    });

    function addTaskProgressBar(ul, todolistContainer) {
      
      const totalTasks = ul.children.length;
      const finishedTasks = Array.from(ul.children).filter(li => li.innerHTML.includes('checked')).length;

      
      const progressContainer = document.createElement('div');
      progressContainer.className = 'todo-progress';

      
      const counterSpan = document.createElement('span');
      counterSpan.className = 'todo-progress-counter';
      counterSpan.textContent = `${finishedTasks}/${totalTasks}`;

      
      const progressTrack = document.createElement('div');
      progressTrack.className = 'todo-progress-bar';

      
      const progressFill = document.createElement('div');
      progressFill.className = 'todo-progress-bar-fill';
      progressFill.style.width = `${(finishedTasks / totalTasks) * 100}%`;

      
      const flagSpan = document.createElement('span');
      flagSpan.className = 'todo-progress-flag';
      flagSpan.innerHTML = `${finishedTasks === totalTasks ? 'ğŸŒŸ' : 'ğŸš§'}`;

      
      progressTrack.appendChild(progressFill);
      progressContainer.append(flagSpan, progressTrack, counterSpan);
      todolistContainer.appendChild(progressContainer);
    }
  });
</script>

<style>
   
  .todolist {
    padding-left: 0.6rem;
  }

  .todo-item {
    padding: 0.2rem;
    display: flex;
    align-items: center;
    gap: 0.3rem;
    margin: -0.5rem 0 -0.5rem -0.7rem;
    line-height: 1.3;
  }

  .todo-item-checkbox {
    flex-shrink: 0;
    font-size: 1.2em;

    svg {
      margin-top: 0.46rem;
      width: 16px !important;
      height: 16px !important;
    }
  }

  .todo-item-checked-icon {
    fill: #707070;
  }

  .todo-item-unchecked-icon {
    fill: #1A61CC;
  }

  .todo-item-unchecked-icon:hover {
    fill: red;
    width: 20px !important;
    height: 20px !important;
  }

  .todo-item-content {
    flex: 1;
    word-break: break-all;

    p {
      margin: 0;
      padding: 0;
    }
  }

   
  .todo-progress {
    display: flex;
     
    align-items: center;
    gap: 0.3rem;
     
    margin: 0.1rem 0 0 0.7rem;
  }

  .todo-progress-counter {
     
    font-family: "LXGW WenKai";
    font-size: 0.8rem;
    color: #707070;
  }

  .todo-progress-bar {
    flex: 1;
    height: 2px;
    background: #a64036;
    border-radius: 10px;
    position: relative;
    overflow: hidden;
    max-width: 20%;
  }

  .todo-progress-bar-fill {
    height: 100%;
    background: #84a729;
    transition: width 0.3s ease;
  }

  .todo-progress-flag {
    display: none;
    position: relative;
    font-size: 0.9rem;
  }
</style>


  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/styles/github.min.css">
<script src="https://cdn.jsdelivr.net/gh/captainwc/cdn-release/website/highlight/highlight.min.js"></script>
<script>document.addEventListener('DOMContentLoaded', () => hljs.highlightAll())</script>



  <script>
    const langToNerdFontMap = {
        asm: '\ue6ab',
        bash: '\ue760',
        bazel: '\ue63a',
        c: '\ue61e',
        cmake: '\ue794',
        cmd: '\uebc4',
        cpp: '\ue61d',
        'c++': '\ue61d',
        csharp: '\ue7b2',
        css: '\ue749',
        diff: '\ueae1',
        dockerfile: '\uf21f',
        go: '\udb81\udfd3',
        gradle: '\ue7f2',
        html: '\ue736',
        java: '\uedaf',
        javascript: '\ue781',
        json: '\ueb0f',
        latex: '\ue81f',
        llvm: '\ue823',
        lua: '\ue826',
        makefile: '\ue673',
        markdown: '\uf48a',
        maven: '\ue82c',
        plaintext: '\udb80\udd4d',
        plantuml: '\ue8cb',
        powershell: '\ue86c',
        python: '\ued1b',
        rust: '\udb85\ude17',
        shell: '\ue760',
        sql: '\udb82\udc66',
        text: '\udb80\udd4d',
        toml: '\ue6b2',
        txt: '\udb80\udd4d',
        typescript: '\ue8ca',
        uml: '\ue8cb',
        vim: '\ue7c5',
        wasm: '\ue8e0',
        xml: '\ue8ea',
        yaml: '\ue8eb',
    };

    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('pre > code').forEach(codeBlock => {
            const parentElement = codeBlock.parentElement;

            
            const tools = document.createElement('div');
            tools.className = 'code-tools';

            
            const foldBtn = document.createElement('button');
            foldBtn.className = 'fold-btn';
            foldBtn.innerHTML = '\uf48c';
            foldBtn.style.display = 'none';

            
            const langLabel = document.createElement('div');
            langLabel.className = 'lang-label';
            const lang = [...codeBlock.classList].find(c => c.startsWith('language-'))?.split('-')[1] || 'text';
            const icon = langToNerdFontMap[lang.toLowerCase()];
            langLabel.textContent = icon || lang.toUpperCase();
            if (!icon) langLabel.style.fontSize = '0.8rem';

            
            const copyBtn = document.createElement('button');
            copyBtn.className = 'copy-btn';
            copyBtn.textContent = '\uf4bb COPY';

            
            const scale_height = 600;       
            const collapsed_height = 500;   
            const checkHeight = () => {
                const originalDisplay = parentElement.style.display;
                parentElement.style.display = 'block';
                const fullHeight = parentElement.scrollHeight;
                parentElement.style.display = originalDisplay;
                return fullHeight > scale_height;
            };

            
            if (checkHeight()) {
                foldBtn.style.display = 'flex';
                parentElement.dataset.fullHeight = `${parentElement.scrollHeight}px`;

                
                parentElement.classList.add('collapsed');
                parentElement.style.maxHeight = `${collapsed_height}px`;
                foldBtn.innerHTML = '\uf4d9';

                parentElement.style.overflowY = 'auto'; 

                foldBtn.addEventListener('click', () => {
                    const isCollapsed = parentElement.classList.toggle('collapsed');
                    foldBtn.innerHTML = isCollapsed ? '\uf4d9' : '\uf48c';

                    if (isCollapsed) {
                        parentElement.style.maxHeight = `${collapsed_height}px`;
                        parentElement.style.overflowX = 'auto';
                    } else {
                        parentElement.style.maxHeight = 'none';
                        void parentElement.offsetHeight;
                        parentElement.dataset.fullHeight = `${parentElement.scrollHeight}px`;
                    }
                });
            }

            
            copyBtn.addEventListener('click', async () => {
                try {
                    await navigator.clipboard.writeText(codeBlock.textContent);
                    copyBtn.textContent = '\uf00c COPIED!';
                    setTimeout(() => copyBtn.textContent = '\uf4bb COPY', 2000);
                } catch (err) {
                    console.error('å¤åˆ¶å¤±è´¥:', err);
                }
            });

            
            tools.append(langLabel, foldBtn, copyBtn);
            parentElement.prepend(tools);
        });
    });
</script>

<style>
 
.code-tools {
    position: absolute;
    right: 10px;
    top: 20px;
    display: flex;
    align-items: center;
    opacity: 0;
    transform: translateY(-10px);
    transition: all 0.2s ease;
    pointer-events: none;
    font-family: "Maple Mono NF CN";
}

.fold-btn {
    cursor: pointer;
    border: none;
    color: #666;
    background: none;
    font-family: "Maple Mono NF CN";
    font-size: 0.9rem;
    line-height: 1.2;
    margin: 0 0 0 0.45rem;
    transition: all 0.2s ease;
}

 
.lang-label {
     
    color: #666;
    font-size: 1.2rem;
    line-height: 1.2;
}

 
.copy-btn {
    background-color: #f0f0f0;
    border: 1px solid #ccc;
    border-radius: 5px;
    padding: 0 0.3rem;
    margin: 0 0 0 0.6rem;
    color: #333;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    font-size: 0.6rem;
    line-height: 1.8;
    cursor: pointer;
    font-family: "Maple Mono NF CN";
}

 
pre:hover .code-tools {
    opacity: 1;
    pointer-events: auto;
}
</style>


  
<script>
    
    window.diagramRenderUtils = {
        
        getOrCreateFullscreenOverlay: function() {
            let overlay = document.querySelector('.fullscreen-overlay');
            if (!overlay) {
                overlay = document.createElement('div');
                overlay.className = 'fullscreen-overlay';
                document.body.appendChild(overlay);

                
                overlay.addEventListener('dblclick', (e) => {
                    if (e.target === overlay) {
                        overlay.classList.remove('active');
                    }
                });

                
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && overlay.classList.contains('active')) {
                        overlay.classList.remove('active');
                    }
                });
            }
            return overlay;
        },

        
        createDiagramContainer: function() {
            const container = document.createElement('div');
            container.className = 'code-rendered-diagram';
            return container;
        },

        
        createCopyButton: function() {
            const copyButton = document.createElement('button');
            copyButton.className = 'code-rendered-diagram-copy-button';
            copyButton.innerHTML = '&#xf4bb; COPY-SRC';
            return copyButton;
        },

        
        createFullscreenButton: function() {
            const fullscreenButton = document.createElement('button');
            fullscreenButton.className = 'code-rendered-diagram-fullscreen-button';
            fullscreenButton.innerHTML = '&#xf065; FULL';
            return fullscreenButton;
        },

        
        makeSVGTransparent: function(svgText) {
            const doc = new DOMParser().parseFromString(svgText, 'image/svg+xml');
            doc.querySelectorAll('[fill="#ffffff"],[fill="white"],[style*="fill: white"]')
                .forEach(el => {
                    if (el.tagName !== 'svg') {
                        el.setAttribute('fill', 'transparent');
                    }
                });
            doc.documentElement.style.backgroundColor = 'transparent';
            return new XMLSerializer().serializeToString(doc);
        },

        
        setupCopyButton: function(copyButton, codeContent) {
            copyButton.addEventListener('click', async () => {
                try {
                    await navigator.clipboard.writeText(codeContent);
                    copyButton.textContent = '\uf00c COPIED!';
                    setTimeout(() => copyButton.innerHTML = '&#xf4bb; COPY-SRC', 2000);
                } catch (err) {
                    copyButton.textContent = 'FAILED';
                    console.error('å¤åˆ¶å¤±è´¥:', err);
                }
            });
        },

        
        setupShowSourceCode: function(imageElem, sourceCode) {
            
            imageElem.addEventListener('contextmenu', function(e) {
                e.preventDefault();

                
                const pre = document.createElement('pre');
                const codeElem = document.createElement('code');
                codeElem.textContent = sourceCode;
                pre.appendChild(codeElem);

                
                window.diagramRenderUtils.popupWindowUtils.create({
                    title: 'Source Code',
                    content: pre,
                    x: e.clientX,
                    y: e.clientY,
                    minWidth: 300,
                    maxWidth: '60%',
                    maxHeight: '60%',
                    closeOnClickOutside: true,
                    closeOnEsc: true,
                    className: 'source-code-viewer'
                });
            });
        },

        
        setupFullscreenButton: function(fullscreenButton, contentElement, isImage = false) {
            fullscreenButton.addEventListener('click', () => {
                const overlay = this.getOrCreateFullscreenOverlay();
                let clonedContent;

                if (isImage) {
                    
                    clonedContent = contentElement.cloneNode(true);
                } else {
                    
                    const svgElement = contentElement.querySelector('svg');
                    if (!svgElement) return;
                    clonedContent = svgElement.cloneNode(true);
                }

                overlay.innerHTML = '';

                
                const exitButton = document.createElement('button');
                exitButton.className = 'fullscreen-exit-button';
                exitButton.innerHTML = 'ESC';
                exitButton.onclick = () => overlay.classList.remove('active');

                overlay.appendChild(exitButton);
                overlay.appendChild(clonedContent);
                overlay.classList.add('active');

                
                this.setupZoomAndDrag(overlay, isImage ? 'img' : 'svg');
            });
        },

        
        setupZoomAndDrag: function(overlay, selector) {
            let scale = 1;
            let posX = 0;
            let posY = 0;
            let isDragging = false;
            let startX = 0;
            let startY = 0;

            const element = overlay.querySelector(selector);

            
            overlay.addEventListener('wheel', (e) => {
                e.preventDefault();
                const delta = e.deltaY * -0.002;
                const newScale = Math.min(Math.max(scale + delta, 0.1), 10);

                
                const rect = element.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;

                
                posX += mouseX * (1 - newScale / scale);
                posY += mouseY * (1 - newScale / scale);

                scale = newScale;
                updateTransform();
            });

            
            overlay.addEventListener('mousedown', (e) => {
                if (e.target === overlay) return;
                isDragging = true;
                startX = e.clientX - posX;
                startY = e.clientY - posY;
                overlay.classList.add('dragging');
            });

            window.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                posX = e.clientX - startX;
                posY = e.clientY - startY;
                updateTransform();
            });

            window.addEventListener('mouseup', () => {
                isDragging = false;
                overlay.classList.remove('dragging');
            });

            function updateTransform() {
                element.style.transform = `translate(${posX}px, ${posY}px) scale(${scale})`;
            }
        },

        
        popupWindowUtils: {
            
            create: function(options) {
                
                const config = {
                    title: 'Popup Window',
                    content: '',         
                    x: 100,              
                    y: 100,              
                    minWidth: 300,       
                    maxWidth: '80%',     
                    maxHeight: '80%',    
                    closeOnClickOutside: true,
                    closeOnEsc: true,
                    onClose: null,       
                    className: ''        
                };

                
                Object.assign(config, options);

                
                if (config.className) {
                    const existingPopup = document.querySelector(`.popup-window.${config.className}`);
                    if (existingPopup) {
                        document.body.removeChild(existingPopup);
                    }
                }

                
                const popup = document.createElement('div');
                popup.className = `popup-window ${config.className}`.trim();

                
                const titleBar = document.createElement('div');
                titleBar.className = 'popup-window-title';
                titleBar.textContent = config.title;

                
                const closeButton = document.createElement('button');
                closeButton.className = 'popup-window-close';
                closeButton.innerHTML = '&times;';

                
                titleBar.appendChild(closeButton);

                
                const contentContainer = document.createElement('div');
                contentContainer.className = 'popup-window-content';

                
                if (typeof config.content === 'string') {
                    contentContainer.innerHTML = config.content;
                } else if (config.content instanceof Element) {
                    contentContainer.appendChild(config.content);
                }

                
                popup.appendChild(titleBar);
                popup.appendChild(contentContainer);

                
                popup.style.minWidth = typeof config.minWidth === 'number' ? `${config.minWidth}px` : config.minWidth;
                popup.style.maxWidth = typeof config.maxWidth === 'number' ? `${config.maxWidth}px` : config.maxWidth;
                popup.style.maxHeight = typeof config.maxHeight === 'number' ? `${config.maxHeight}px` : config.maxHeight;

                
                document.body.appendChild(popup);

                
                const popupRect = popup.getBoundingClientRect();
                const windowWidth = window.innerWidth;
                const windowHeight = window.innerHeight;

                
                let left = Math.min(Math.max(config.x, 20), windowWidth - popupRect.width - 20);
                let top = Math.min(Math.max(config.y, 20), windowHeight - popupRect.height - 20);

                popup.style.left = `${left}px`;
                popup.style.top = `${top}px`;

                
                const closePopup = () => {
                    if (document.body.contains(popup)) {
                        document.body.removeChild(popup);
                        if (typeof config.onClose === 'function') {
                            config.onClose();
                        }
                    }
                };

                closeButton.addEventListener('click', closePopup);

                
                if (config.closeOnEsc) {
                    const escHandler = (e) => {
                        if (e.key === 'Escape' && document.body.contains(popup)) {
                            closePopup();
                            document.removeEventListener('keydown', escHandler);
                        }
                    };
                    document.addEventListener('keydown', escHandler);
                }

                
                if (config.closeOnClickOutside) {
                    const outsideClickHandler = (e) => {
                        if (popup && !popup.contains(e.target) && document.body.contains(popup)) {
                            closePopup();
                            document.removeEventListener('mousedown', outsideClickHandler);
                        }
                    };

                    
                    setTimeout(() => {
                        document.addEventListener('mousedown', outsideClickHandler);
                    }, 100);
                }

                
                let isDragging = false;
                let offsetX = 0;
                let offsetY = 0;

                titleBar.addEventListener('mousedown', (e) => {
                    
                    if (e.target !== closeButton) {
                        isDragging = true;
                        offsetX = e.clientX - popup.getBoundingClientRect().left;
                        offsetY = e.clientY - popup.getBoundingClientRect().top;
                        popup.classList.add('dragging');
                    }
                });

                const mouseMoveHandler = (e) => {
                    if (isDragging) {
                        let newLeft = e.clientX - offsetX;
                        let newTop = e.clientY - offsetY;

                        
                        newLeft = Math.max(0, Math.min(windowWidth - popupRect.width, newLeft));
                        newTop = Math.max(0, Math.min(windowHeight - popupRect.height, newTop));

                        popup.style.left = `${newLeft}px`;
                        popup.style.top = `${newTop}px`;
                    }
                };

                const mouseUpHandler = () => {
                    if (isDragging) {
                        isDragging = false;
                        popup.classList.remove('dragging');
                    }
                };

                document.addEventListener('mousemove', mouseMoveHandler);
                document.addEventListener('mouseup', mouseUpHandler);

                
                return {
                    element: popup,
                    contentElement: contentContainer,
                    close: closePopup,
                    setTitle: (title) => {
                        titleBar.textContent = title;
                        titleBar.appendChild(closeButton); 
                    },
                    setContent: (content) => {
                        contentContainer.innerHTML = '';
                        if (typeof content === 'string') {
                            contentContainer.innerHTML = content;
                        } else if (content instanceof Element) {
                            contentContainer.appendChild(content);
                        }
                    },
                    setPosition: (x, y) => {
                        let newLeft = Math.min(Math.max(x, 0), windowWidth - popupRect.width);
                        let newTop = Math.min(Math.max(y, 0), windowHeight - popupRect.height);
                        popup.style.left = `${newLeft}px`;
                        popup.style.top = `${newTop}px`;
                    },
                    
                    destroy: () => {
                        document.removeEventListener('mousemove', mouseMoveHandler);
                        document.removeEventListener('mouseup', mouseUpHandler);
                        if (document.body.contains(popup)) {
                            document.body.removeChild(popup);
                        }
                    }
                };
            }
        }
    };
</script>
<style>
     
    .code-rendered-diagram {
        max-width: 80% !important;
        height: auto;
        position: relative;

        svg {
            max-width: 100%;
            height: auto;
        }
    }

    .code-rendered-diagram-copy-button,
    .code-rendered-diagram-fullscreen-button {
        position: absolute;
        top: 20px;
        transform: translateY(-10px);
        transition: all 0.2s ease;
        background-color: #f0f0f0;
        border: 1px solid #ccc;
        border-radius: 5px;
        padding: 0 0.3rem;
        margin: 0 0 0 0.6rem;
        color: #333;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        font-size: 0.6rem;
        line-height: 1.8;
        cursor: pointer;
        font-family: "Maple Mono NF CN";
        opacity: 0;
    }

    .code-rendered-diagram-copy-button {
        right: 10px;
    }

    .code-rendered-diagram-fullscreen-button {
        right: 100px;
    }

    .code-rendered-diagram:hover .code-rendered-diagram-copy-button,
    .code-rendered-diagram:hover .code-rendered-diagram-fullscreen-button {
        opacity: 1;
    }

    .fullscreen-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #FBFBFB;
         
        z-index: 99999;
        justify-content: center;
        align-items: center;
    }

    .fullscreen-overlay.active {
        display: flex;
    }

    .fullscreen-overlay img,
    .fullscreen-overlay svg {
        max-width: 90%;
        max-height: 90%;
        object-fit: contain;
        cursor: move;
        transition: transform 0.1s ease-out;
        transform-origin: center center;
    }

    .fullscreen-overlay svg {
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
    }

    .fullscreen-overlay.dragging {
        cursor: move;
    }

    .fullscreen-exit-button {
        position: fixed;
        top: 20px;
        left: 20px;
        background-color: #f0f0f0;
        border: 1px solid #ccc;
        border-radius: 6px;
        color: #666;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        font-size: 0.8rem;
        line-height: 1.8;
        cursor: pointer;
        font-family: "Maple Mono NF CN";
        transition: all 0.2s ease;
        z-index: 100000;
    }

    .fullscreen-exit-button:hover {
        background-color: #e0e0e0;
        color: #333;
    }

     
    .popup-window {
        position: fixed;
        z-index: 10000;
        background-color: #f8f8f8;
        border: 1px solid #ccc;
        border-radius: 6px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        display: flex;
        flex-direction: column;
        overflow: hidden;
        transition: box-shadow 0.3s ease;
    }

    .popup-window.dragging {
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
        opacity: 0.95;
    }

    .popup-window-title {
        background-color: #e8e8e8;
        padding: 8px 12px;
        font-weight: bold;
        border-bottom: 1px solid #ddd;
        cursor: move;
        user-select: none;
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: #333;
        font-family: "Maple Mono NF CN", monospace;
        font-size: 0.9rem;
    }

    .popup-window-close {
        background: none;
        border: none;
        font-size: 1.2rem;
        line-height: 1;
        cursor: pointer;
        color: #666;
        padding: 0 4px;
        margin: -4px -4px 0 0;
        transition: color 0.2s ease;
    }

    .popup-window-close:hover {
        color: #333;
    }

    .popup-window-content {
        overflow: auto;
        padding: 10px;
        font-size: 0.9rem;
    }

     
    .popup-window.source-code-viewer .popup-window-content {
        font-family: "Maple Mono NF CN", monospace;
    }

    .popup-window.source-code-viewer .popup-window-content pre {
        margin: 0;
        white-space: pre-wrap;
    }

    .popup-window.source-code-viewer .popup-window-content code {
        font-family: "Maple Mono NF CN", monospace;
        color: #333;
    }
</style>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        const plantumlBlocks = document.querySelectorAll('pre code.language-plantuml');
        if (!plantumlBlocks.length) return;

        
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/plantuml-encoder@1.4.0/dist/plantuml-encoder.min.js';

        
        script.onload = () => {
            const plantuml_theme = parsePlantumlUserConfig();

            plantumlBlocks.forEach(codeBlock => {
                
                const container = window.diagramRenderUtils.createDiagramContainer();

                
                const img = document.createElement('img');
                img.className = 'code-rendered-diagram-img';
                img.style.display = 'block';
                img.alt = 'PlantUML Diagram';

                
                const fullCode = `${plantuml_theme}\n\n${codeBlock.textContent}`;
                img.src = 'https://www.plantuml.com/plantuml/svg/' + plantumlEncoder.encode(fullCode);

                
                const copyButton = window.diagramRenderUtils.createCopyButton();
                window.diagramRenderUtils.setupCopyButton(copyButton, fullCode);

                
                window.diagramRenderUtils.setupShowSourceCode(img, fullCode);

                
                const fullscreenButton = window.diagramRenderUtils.createFullscreenButton();
                window.diagramRenderUtils.setupFullscreenButton(fullscreenButton, img, true);

                
                

                
                container.appendChild(img);
                container.appendChild(fullscreenButton);
                container.appendChild(copyButton);
                codeBlock.parentElement.replaceWith(container);
            });
        };

        
        document.head.appendChild(script);
    });

    function parsePlantumlUserConfig() {
        let configItems = [];

        
            configItems.push(`scale 5`);
        

        
            configItems.push(`skin rose`);
        

        
            configItems.push(`skinparam BackgroundColor transparent`);
        

        
        
            
                configItems.push(`skinparam shadowing false`);
            
        

        

        
            configItems.push(`skinparam BackgroundColor transparent`);
        

        return configItems.join("\n").trim();
    }
</script>

  
<script>
    document.addEventListener('DOMContentLoaded', function() {
        
        const mermaidBlocks = document.querySelectorAll('pre code.language-mermaid');
        if (!mermaidBlocks.length) return;

        
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/mermaid@11.6.0/dist/mermaid.min.js';

        
        script.onload = () => {
            
            mermaid.initialize({
                startOnLoad: false,
                securityLevel: 'loose',
                fontFamily: 'Maple Mono NF CN',
                
                look: 'handDrawn',
                
                theme: 'neutral',
                
                
            });

            
            mermaidBlocks.forEach((codeBlock, index) => {
                
                const container = window.diagramRenderUtils.createDiagramContainer();

                
                const renderDiv = document.createElement('div');
                renderDiv.id = `mermaid-diagram-${index}`;
                renderDiv.style.background = 'transparent';

                
                const code = codeBlock.textContent.trim();

                try {
                    
                    mermaid.render(`mermaid-svg-${index}`, code).then(result => {
                        renderDiv.innerHTML = result.svg;

                        
                        const svg = renderDiv.querySelector('svg');
                        if (svg) {
                            svg.style.backgroundColor = 'transparent';
                            
                            svg.querySelectorAll('[fill="#ffffff"],[fill="white"],[style*="fill: white"]')
                                .forEach(el => {
                                    if (el.tagName !== 'svg') {
                                        el.setAttribute('fill', 'transparent');
                                    }
                                });
                        }
                    });
                } catch (error) {
                    console.error('Mermaidæ¸²æŸ“é”™è¯¯:', error);
                    renderDiv.innerHTML = `<div style="color:red;border:1px solid red;padding:10px;">
                        Mermaidæ¸²æŸ“é”™è¯¯: ${error.message}
                    </div>`;
                }

                
                const copyButton = window.diagramRenderUtils.createCopyButton();
                window.diagramRenderUtils.setupCopyButton(copyButton, code);

                
                window.diagramRenderUtils.setupShowSourceCode(renderDiv, code);

                
                const fullscreenButton = window.diagramRenderUtils.createFullscreenButton();
                window.diagramRenderUtils.setupFullscreenButton(fullscreenButton, renderDiv, false);

                
                container.appendChild(renderDiv);
                container.appendChild(fullscreenButton);
                container.appendChild(copyButton);

                
                const pre = codeBlock.closest('pre');
                pre.insertAdjacentElement('afterend', container);
                pre.remove();
            });
        };

        
        document.head.appendChild(script);
    });
</script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        const markmapBlocks = document.querySelectorAll('pre code.language-map, pre code.language-mindmap');
        if (!markmapBlocks.length) return;

        
        function loadScript(url) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = url;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }

        
        Promise.all([
            loadScript('https://cdn.jsdelivr.net/npm/d3@latest'),
            loadScript('https://cdn.jsdelivr.net/npm/markmap-view@latest'),
            loadScript('https://cdn.jsdelivr.net/npm/markmap-lib@latest')
        ]).then(() => {
            
            markmapBlocks.forEach((codeBlock, index) => {
                
                const container = window.diagramRenderUtils.createDiagramContainer();

                
                const markmapContainer = document.createElement('div');
                markmapContainer.className = 'markmap';
                markmapContainer.id = `markmap-${index}`;
                markmapContainer.style.minHeight = '300px';
                markmapContainer.style.width = '100%';
                markmapContainer.style.position = 'relative';

                
                const code = codeBlock.textContent.trim();

                
                const svgElement = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svgElement.style.width = '100%';
                svgElement.style.height = '400px';
                markmapContainer.appendChild(svgElement);

                
                const copyButton = window.diagramRenderUtils.createCopyButton();
                window.diagramRenderUtils.setupCopyButton(copyButton, code);

                
                window.diagramRenderUtils.setupShowSourceCode(markmapContainer, code);

                
                const fullscreenButton = window.diagramRenderUtils.createFullscreenButton();
                window.diagramRenderUtils.setupFullscreenButton(fullscreenButton, markmapContainer, false);

                
                container.appendChild(markmapContainer);
                container.appendChild(fullscreenButton);
                container.appendChild(copyButton);

                
                const pre = codeBlock.closest('pre');
                pre.insertAdjacentElement('afterend', container);
                pre.remove();

                
                renderMarkmapWithRetry(svgElement, markmapContainer, code);
            });
        }).catch(error => {
            console.error('åŠ è½½markmapåº“å¤±è´¥:', error);
        });

        

        function renderMarkmapWithRetry(svgElement, markmapContainer, code, maxRetries = 5, delay = 200) {
            let attempt = 0;

            function tryRender() {
                attempt++;
                try {
                    
                    if (!window.markmap || typeof window.markmap.Markmap !== 'function') {
                        throw new Error('Markmap constructor not available yet.');
                    }

                    
                    const { Transformer } = window.markmap;
                    const transformer = new Transformer();

                    
                    const { root, features } = transformer.transform(code);

                    
                    const { Markmap } = window.markmap;
                    const mm = new Markmap(svgElement, {
                        autoFit: true,
                        duration: 500,
                        zoom: true,
                    });

                    
                    mm.setData(root, features);
                    mm.fit();

                    
                    markmapContainer.dataset.markmapData = JSON.stringify({
                        root: root,
                        features: features
                    });

                    
                    setTimeout(() => {
                        const links = svgElement.querySelectorAll('a');
                        links.forEach(link => {
                            link.setAttribute('target', '_blank');
                            link.setAttribute('rel', 'noopener noreferrer');
                        });
                    }, 100);

                } catch (error) {
                    console.error(`Markmapæ¸²æŸ“å°è¯•ç¬¬ ${attempt} æ¬¡å¤±è´¥:`, error.message);
                    if (attempt < maxRetries) {
                        
                        setTimeout(tryRender, delay);
                    } else {
                        
                        console.error('Markmapæ¸²æŸ“åœ¨å¤šæ¬¡é‡è¯•åä»ç„¶å¤±è´¥ã€‚');
                        markmapContainer.innerHTML = `<div style="color:red;border:1px solid red;padding:10px;">
                            Markmapæ¸²æŸ“é”™è¯¯: ${error.message} (è¯·å°è¯•æ‰‹åŠ¨åˆ·æ–°ç½‘é¡µ)
                        </div>`;
                    }
                }
            }

            
            tryRender();
        }
    });
</script>

<script>
    
    document.addEventListener('DOMContentLoaded', function() {
        
        if (!window.diagramRenderUtils) return;

        
        const originalSetupFullscreenButton = window.diagramRenderUtils.setupFullscreenButton;
        window.diagramRenderUtils.setupFullscreenButton = function(fullscreenButton, contentElement, isImage = false) {
            
            const isMarkmap = contentElement.classList.contains('markmap');

            if (isMarkmap) {
                fullscreenButton.addEventListener('click', () => {
                    const overlay = this.getOrCreateFullscreenOverlay();
                    overlay.innerHTML = '';

                    
                    const exitButton = document.createElement('button');
                    exitButton.className = 'fullscreen-exit-button';
                    exitButton.innerHTML = 'ESC';
                    exitButton.onclick = () => overlay.classList.remove('active');
                    overlay.appendChild(exitButton);

                    
                    const fullscreenContainer = document.createElement('div');
                    fullscreenContainer.className = 'markmap';
                    fullscreenContainer.style.width = '100%';
                    fullscreenContainer.style.height = '100%';

                    
                    const svgElement = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                    svgElement.style.width = '100%';
                    svgElement.style.height = '100%';
                    fullscreenContainer.appendChild(svgElement);

                    overlay.appendChild(fullscreenContainer);
                    overlay.classList.add('active');

                    
                    try {
                        const markmapData = JSON.parse(contentElement.dataset.markmapData || '{}');
                        if (markmapData.root) {
                            
                            const { Markmap } = window.markmap;
                            const mm = new Markmap(svgElement, {
                                autoFit: true,
                                duration: 500,
                                zoom: true,
                            });

                            
                            mm.setData(markmapData.root, markmapData.features);
                            mm.fit();

                            
                            setTimeout(() => {
                                const links = svgElement.querySelectorAll('a');
                                links.forEach(link => {
                                    link.setAttribute('target', '_blank');
                                    link.setAttribute('rel', 'noopener noreferrer');
                                });
                            }, 100);
                        }
                    } catch (error) {
                        console.error('å…¨å±æ¨¡å¼ä¸‹æ¸²æŸ“markmapå¤±è´¥:', error);
                    }

                    
                    this.setupZoomAndDrag(overlay, 'svg');
                });
            } else {
                
                originalSetupFullscreenButton.call(this, fullscreenButton, contentElement, isImage);
            }
        };
    });
</script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        const xmindBlocks = document.querySelectorAll('pre code.language-xmind');
        if (xmindBlocks.length === 0) {
            return;
        }

        
        const script = document.createElement('script');
        script.src = 'https://unpkg.com/xmind-embed-viewer/dist/umd/xmind-embed-viewer.js';
        document.head.appendChild(script);

        
        script.onload = function() {
            xmindBlocks.forEach((codeBlock, index) => {
                const xmindUrl = codeBlock.textContent.trim();
                if (!xmindUrl) {
                    console.error('XMind code block is empty.');
                    return;
                }

                
                const mountId = `xmind-mount-${index}`;
                const mountDiv = document.createElement('div');
                mountDiv.id = mountId;

                
                const preElement = codeBlock.parentElement;
                preElement.parentElement.replaceChild(mountDiv, preElement);

                renderXmindFile(mountId, xmindUrl);
            });

            async function renderXmindFile(elementId, fileUrl) {
                const mountEl = document.getElementById(elementId);

                
                
                mountEl.className = 'xmind-container';
                
                mountEl.innerHTML = `
                <div class="xmind-loader-wrapper">
                    <div class="xmind-loader"></div>
                    <div class="xmind-loader-text">xmind loading</div>
                </div>
            `;

                try {
                    
                    const isExternal = fileUrl.startsWith('http');
                    const fetchUrl = isExternal ? `https://api.allorigins.win/raw?url=${encodeURIComponent(fileUrl)}` : fileUrl;
                    const res = await fetch(fetchUrl, {
                        mode: 'cors'
                    });

                    
                    if (!res.ok) {
                        mountEl.innerHTML = `
                        <div class="xmind-error">
                            <span class="xmind-error-icon">âš ï¸</span>
                            <div class="xmind-error-content">
                                <strong>åŠ è½½ XMind æ–‡ä»¶å¤±è´¥</strong>
                                <p>æ— æ³•ä» <code>${fileUrl}</code> è·å–æ–‡ä»¶ (HTTP ${res.status})</p>
                            </div>
                        </div>
                    `;
                        console.error(`Failed to fetch XMind file: ${res.statusText}`);
                        return;
                    }
                    const fileBuffer = await res.arrayBuffer();

                    
                    mountEl.className = ''; 
                    mountEl.innerHTML = ''; 

                    new XMindEmbedViewer({
                        el: `#${elementId}`,
                        file: fileBuffer,
                        styles: {
                            'height': '500px',
                            'width': '100%'
                        }
                    });
                } catch (error) {
                    
                    mountEl.innerHTML = `
                    <div class="xmind-error">
                        <span class="xmind-error-icon">âš ï¸</span>
                        <div class="xmind-error-content">
                            <strong>æ¸²æŸ“ XMind æ–‡ä»¶æ—¶å‡ºé”™</strong>
                            <p>${error.message}</p>
                        </div>
                    </div>
                `;
                    console.error('Error rendering XMind file:', error);
                }
            }
        }
    });
</script>

<style>
     
    .xmind-container {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 200px;
        background-color: #f9f9f9;
        border: 1px dashed #ddd;
        border-radius: 6px;
        margin: 1.5rem 0;
        padding: 20px;
    }

     
    .xmind-loader-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }

     
    .xmind-loader {
        border: 3px solid #f0f0f0;
        border-top: 3px solid #999;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        animation: spin 1s linear infinite;
    }

     
    .xmind-loader-text {
        color: #888;
        font-size: 0.9rem;
        font-family: "LXGW WenKai", "Maple Mono NF CN", sans-serif;
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

     
    .xmind-error {
        display: flex;
        align-items: flex-start;
        text-align: left;
        color: #c0392b;
        width: 100%;
    }

    .xmind-error-icon {
        font-size: 1.5rem;
        margin-right: 15px;
        line-height: 1.2;
    }

    .xmind-error-content {
        flex: 1;
    }

    .xmind-error strong {
        font-size: 1.1rem;
        color: #a93226;
    }

    .xmind-error p {
        margin: 5px 0 0;
        font-size: 0.9rem;
        color: #7b241c;
        word-break: break-all;
    }

    .xmind-error code {
        background-color: #fbeae5;
        padding: 2px 5px;
        border-radius: 4px;
        font-size: 0.85rem;
    }
</style>

  
<script>
    document.addEventListener('DOMContentLoaded', () => {
        
        const DIAGRAM_MAP = new Map([
            ['plantuml_kroki', 'plantuml'],
            ['mermaid_kroki', 'mermaid'],
            ['graphviz', 'graphviz'],
            ['blockdiag', 'blockdiag'],
            ['seqdiag', 'seqdiag'],
            ['actdiag', 'actdiag'],
            ['packetdiag', 'packetdiag'],
            ['database', 'dbml'],
            ['dbml', 'dbml'],
            ['vega', 'vega']
        ]);

        
        const blocks = [];
        document.querySelectorAll('pre code[class]').forEach(block => {
            if (block.dataset.kroki) return;
            const lang = [...block.classList].find(c => DIAGRAM_MAP.has(c.split('-')[1]));
            if (lang) {
                block.dataset.kroki = 'processed';
                blocks.push({ block, api: DIAGRAM_MAP.get(lang.split('-')[1]) });
            }
        });

        if (!blocks.length) return;

        
        const CONCURRENCY = 6;
        const queue = blocks.slice();

        (async function processQueue() {
            const workers = Array(Math.min(CONCURRENCY, queue.length))
                .fill()
                .map(async () => {
                    while (queue.length) {
                        const { block, api } = queue.pop();
                        await renderBlock(block, api);
                    }
                });
            await Promise.all(workers);
        })();

        async function renderBlock(block, api) {
            const pre = block.closest('pre');
            try {
                const code = block.textContent.trim();
                if (!code) {
                    pre.style.border = '2px solid orange';
                    return;
                }

                const res = await fetch(`https://kroki.io/${api}/svg`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'text/plain' },
                    body: code
                });

                if (!res.ok) throw new Error(`${await res.text()} (HTTP ${res.status})`);

                
                const svg = window.diagramRenderUtils.createDiagramContainer();
                svg.innerHTML = window.diagramRenderUtils.makeSVGTransparent(await res.text());

                
                const fullscreenButton = window.diagramRenderUtils.createFullscreenButton();
                window.diagramRenderUtils.setupFullscreenButton(fullscreenButton, svg, false);
                svg.appendChild(fullscreenButton);

                
                const copyButton = window.diagramRenderUtils.createCopyButton();
                window.diagramRenderUtils.setupCopyButton(copyButton, code);
                svg.appendChild(copyButton);

                
                window.diagramRenderUtils.setupShowSourceCode(svg, code);

                pre.insertAdjacentElement('afterend', svg);

                
                pre.remove();
            } catch (err) {
                console.error(`[Kroki] æ¸²æŸ“å¤±è´¥: ${err.message}`);
                pre.style.border = '2px solid red';
                pre.title = err.message;
            }
        }
    });
</script>


  <div id="search-modal">
  <input type="text" id="modal-search-input" placeholder="è¾“å…¥å…³é”®è¯æœç´¢..." aria-label="æœç´¢æ¡†" autocomplete="off">
  <div id="modal-search-debug" style="margin-bottom: 10px; color: #999;"></div>
  <div id="modal-search-results"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>

<script>
  function debug(text) {
      document.getElementById('modal-search-debug').textContent = text;
  }
  function showpages() {
    debug("å½“å‰æœ¬ç«™å…±æœ‰ " + searchIndex.length + " ç¯‡æ–‡ç« ");
  }

  let searchIndex = [];
  
  
    
  

  
    searchIndex.push({
      title: "\"é¢å‘æ¨¡å¼çš„è½¯ä»¶æ¶æ„ å·1 æ¨¡å¼ç³»ç»Ÿ è¯»ä¹¦ç¬”è®°\"",
      permalink: "\"/%E7%AC%94%E8%AE%B0/%E9%9D%A2%E5%90%91%E6%A8%A1%E5%BC%8F%E7%9A%84%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E5%8D%B71%E6%A8%A1%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/\"",
      
      categories: "[\"è¯»ä¹¦ç¬”è®°\",\"è½¯ä»¶å·¥ç¨‹\"]",
      tags: "[\"è®¾è®¡æ¨¡å¼\"]",
      series: "[\"è½¯ä»¶æ¶æ„ä¹‹é“\"]",
      date: "\"2025-12-04\""
    });
  
    searchIndex.push({
      title: "\"é“¾æ¥ç¬¦å·ä¸ç¬¦å·å¯¼å…¥å¯¼å‡ºå®â€”â€”è®°ä¸€æ¬¡å› clangdè¡¥å…¨å¤´æ–‡ä»¶äº§ç”Ÿçš„é“¾æ¥é”™è¯¯\"",
      permalink: "\"/cpp/%E9%93%BE%E6%8E%A5%E7%AC%A6%E5%8F%B7%E5%AF%BC%E5%87%BA%E4%B8%8E%E7%AC%A6%E5%8F%B7%E5%8F%AF%E8%A7%81%E5%AE%8F/\"",
      
      categories: "[\"C++ç¬”è®°\"]",
      tags: "[\"C++\"]",
      series: "[\"C++è¸©å‘\"]",
      date: "\"2025-11-17\""
    });
  
    searchIndex.push({
      title: "\"Qtä»é›¶å¼€å§‹ï¼ˆ0ï¼‰â€”â€”ç¯å¢ƒé…ç½®\"",
      permalink: "\"/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/qt%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/\"",
      
      categories: "[\"ç¯å¢ƒé…ç½®\"]",
      tags: [],
      series: "[\"Qtä¸“æ \"]",
      date: "\"2025-08-30\""
    });
  
    searchIndex.push({
      title: "\"ubuntué…ç½®coredumpæ–‡ä»¶ç”Ÿæˆä½ç½®\"",
      permalink: "\"/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/ubuntu%E7%94%9F%E6%88%90coredump%E6%96%87%E4%BB%B6/\"",
      
      categories: "[\"ç¯å¢ƒé…ç½®\"]",
      tags: [],
      series: [],
      date: "\"2025-08-01\""
    });
  
    searchIndex.push({
      title: "\"ubuntuå®‰è£…ä¸­æ–‡è¾“å…¥æ³•ï¼ˆfcitx5-rimeï¼‰\"",
      permalink: "\"/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/ubuntu%E5%AE%89%E8%A3%85rime%E8%BE%93%E5%85%A5%E6%B3%95/\"",
      
      categories: "[\"ç¯å¢ƒé…ç½®\"]",
      tags: [],
      series: [],
      date: "\"2025-07-10\""
    });
  
    searchIndex.push({
      title: "\"SSHåå‘éš§é“ä¸­è½¬æœº-è¿œç¨‹è¿æ¥æœ¬åœ°æœåŠ¡å™¨\"",
      permalink: "\"/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/ssh%E5%8F%8D%E5%90%91%E9%9A%A7%E9%81%93%E4%B8%AD%E8%BD%AC%E6%9C%BA%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%99%A8/\"",
      
      categories: "[\"å·¥å…·ä½¿ç”¨\"]",
      tags: "[\"ssh\"]",
      series: [],
      date: "\"2025-06-16\""
    });
  
    searchIndex.push({
      title: "\"C++ é«˜å¹¶å‘æœåŠ¡å™¨æ¨¡å‹å®ç° | [è½¬è½½](https://github.com/linkxzhou/mylib/blob/master/c%2B%2B/concurrency_server/README.md)\"",
      permalink: "\"/%E8%BD%AC%E8%BD%BD/2025/06/10/22%E7%A7%8Dc-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%B9%B6%E5%8F%91%E6%A8%A1%E5%9E%8B/\"",
      
      categories: "[\"åšå®¢å‰ªè—\"]",
      tags: "[\"ç½‘ç»œç¼–ç¨‹\",\"C++\"]",
      series: [],
      date: "\"2025-06-10\""
    });
  
    searchIndex.push({
      title: "\"libclang-pyä½¿ç”¨ä»‹ç»\"",
      permalink: "\"/cpp/libclang-py%E4%BD%BF%E7%94%A8/\"",
      
      categories: [],
      tags: "[\"C++\",\"ç¼–è¯‘åŸç†\"]",
      series: "[\"å¿«é€Ÿä¸Šæ‰‹\"]",
      date: "\"2025-06-10\""
    });
  
    searchIndex.push({
      title: "\"å‚æ•°åŒ…ä¸æŠ˜å è¡¨è¾¾å¼å‚»å‚»åˆ†ä¸æ¸…\"",
      permalink: "\"/cpp/%E5%8F%82%E6%95%B0%E5%8C%85%E4%B8%8E%E6%8A%98%E5%8F%A0%E8%A1%A8%E8%BE%BE%E5%BC%8F/\"",
      
      categories: "[\"C++ç¬”è®°\"]",
      tags: "[\"C++\"]",
      series: "[\"modern c++\"]",
      date: "\"2025-06-05\""
    });
  
    searchIndex.push({
      title: "\"åç¨‹å¿«é€Ÿå…¥é—¨\"",
      permalink: "\"/cpp/%E5%8D%8F%E7%A8%8B%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/\"",
      
      categories: "[\"C++ç¬”è®°\"]",
      tags: "[\"coroutine\",\"C++\"]",
      series: "[\"modern c++\"]",
      date: "\"2025-05-21\""
    });
  
    searchIndex.push({
      title: "\"åˆç­‰æ•°å­¦å›å¿†å½•\"",
      permalink: "\"/%E7%AC%94%E8%AE%B0/%E5%88%9D%E7%AD%89%E6%95%B0%E5%AD%A6%E5%9B%9E%E5%BF%86%E5%BD%95/\"",
      
      categories: "[\"æ•°å­¦\"]",
      tags: "[\"æ•°å­¦\",\"ä¸‰è§’å‡½æ•°\",\"æåæ ‡\",\"å®šç§¯åˆ†\"]",
      series: [],
      date: "\"2025-05-16\""
    });
  
    searchIndex.push({
      title: "\"Epollè¯¦ç»†ä»‹ç» | [è½¬è½½](https://mp.weixin.qq.com/s/pahk8ay5MvkvONeg1-M82w)\"",
      permalink: "\"/%E8%BD%AC%E8%BD%BD/2025/05/04/epoll%E8%AF%A6%E8%A7%A3/\"",
      
      categories: "[\"åšå®¢å‰ªè—\"]",
      tags: "[\"ç½‘ç»œç¼–ç¨‹\",\"epoll\"]",
      series: [],
      date: "\"2025-05-04\""
    });
  
    searchIndex.push({
      title: "\"å…±äº«å†…å­˜è¯¦è§£ | [è½¬è½½](https://mp.weixin.qq.com/s/wOySn0oi0xXREpFRBXCMmQ)\"",
      permalink: "\"/%E8%BD%AC%E8%BD%BD/2025/05/04/%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98%E8%AF%A6%E8%A7%A3/\"",
      
      categories: "[\"åšå®¢å‰ªè—\"]",
      tags: "[\"ç½‘ç»œç¼–ç¨‹\"]",
      series: [],
      date: "\"2025-05-04\""
    });
  
    searchIndex.push({
      title: "\"Asio åŸºæœ¬ä½¿ç”¨ä¸æ ¸å¿ƒè®¾è®¡æ€æƒ³ | [è½¬è½½](https://blog.csdn.net/gma999/article/details/143983035)\"",
      permalink: "\"/%E8%BD%AC%E8%BD%BD/2025/04/17/asio-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%A0%B8%E5%BF%83%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/\"",
      
      categories: "[\"åšå®¢å‰ªè—\"]",
      tags: "[\"asio\"]",
      series: "[\"ç½‘ç»œç¼–ç¨‹\"]",
      date: "\"2025-04-17\""
    });
  
    searchIndex.push({
      title: "\"GoogleTestä¸gMockè¿›é˜¶æŒ‡å— | [è½¬è½½](https://www.cnblogs.com/jinyunshaobing/p/16804309.html)\"",
      permalink: "\"/%E8%BD%AC%E8%BD%BD/2025/04/16/googletest%E4%B8%8Egmock%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/\"",
      
      categories: "[\"åšå®¢å‰ªè—\"]",
      tags: "[\"GoogleTest\"]",
      series: [],
      date: "\"2025-04-16\""
    });
  
    searchIndex.push({
      title: "\"GTest / GMock å•å…ƒæµ‹è¯•å®è·µæ‰‹å†Œ | [è½¬è½½](https://imageslr.com/2023/gtest.html)\"",
      permalink: "\"/%E8%BD%AC%E8%BD%BD/2025/04/16/gtest_gmock-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%AE%9E%E8%B7%B5%E6%89%8B%E5%86%8C/\"",
      
      categories: "[\"åšå®¢å‰ªè—\"]",
      tags: "[\"GoogleTest\"]",
      series: [],
      date: "\"2025-04-16\""
    });
  
    searchIndex.push({
      title: "\"Docker ç½‘ç»œæ¨¡å¼è¯¦è§£åŠå®¹å™¨é—´ç½‘ç»œé€šä¿¡ | [è½¬è½½](https://www.cnblogs.com/mrhelloworld/p/docker11.html)\"",
      permalink: "\"/%E8%BD%AC%E8%BD%BD/2025/04/15/docker-%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%AE%B9%E5%99%A8%E9%97%B4%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/\"",
      
      categories: "[\"åšå®¢å‰ªè—\"]",
      tags: "[\"Docker\"]",
      series: [],
      date: "\"2025-04-15\""
    });
  
    searchIndex.push({
      title: "\"ä¸‡å­—é•¿æ–‡ç®€è¿°Apolloä¸­CyberRTæ¡†æ¶åŸºç¡€æ¦‚å¿µ | [è½¬è½½](https://zhuanlan.zhihu.com/p/479518561#CTZ_DEFAULT)\"",
      permalink: "\"/%E8%BD%AC%E8%BD%BD/2025/04/15/%E4%B8%87%E5%AD%97%E9%95%BF%E6%96%87%E7%AE%80%E8%BF%B0apollo%E4%B8%ADcyberrt%E6%A1%86%E6%9E%B6%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/\"",
      
      categories: "[\"åšå®¢å‰ªè—\"]",
      tags: "[\"CyberRT\"]",
      series: [],
      date: "\"2025-04-15\""
    });
  
    searchIndex.push({
      title: "\"C++å°æŠ€å·§\"",
      permalink: "\"/cpp/c++%E5%B0%8F%E6%8A%80%E5%B7%A7/\"",
      
      categories: "[\"C++ç¬”è®°\"]",
      tags: "[\"C++\"]",
      series: "[\"modern c++\"]",
      date: "\"2025-04-14\""
    });
  
    searchIndex.push({
      title: "\"tmux å¿«é€Ÿä¸Šæ‰‹\"",
      permalink: "\"/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/tmux%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/\"",
      
      categories: "[\"å·¥å…·ä½¿ç”¨\"]",
      tags: "[\"tmux\"]",
      series: "[\"å¿«é€Ÿä¸Šæ‰‹\"]",
      date: "\"2025-04-08\""
    });
  
    searchIndex.push({
      title: "\"Valgrindå¿«é€Ÿä¸Šæ‰‹\"",
      permalink: "\"/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/valgrind%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/\"",
      
      categories: "[\"å·¥å…·ä½¿ç”¨\"]",
      tags: "[\"valgrind\"]",
      series: "[\"å¿«é€Ÿä¸Šæ‰‹\"]",
      date: "\"2025-04-08\""
    });
  
    searchIndex.push({
      title: "\"Mermaidå¿«é€Ÿä¸Šæ‰‹\"",
      permalink: "\"/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/mermaid%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/\"",
      
      categories: "[\"å·¥å…·ä½¿ç”¨\"]",
      tags: "[\"mermaid\"]",
      series: "[\"å¿«é€Ÿä¸Šæ‰‹\"]",
      date: "\"2025-04-07\""
    });
  
    searchIndex.push({
      title: "\"CyberRTæ¡†æ¶æ€»è§ˆ\"",
      permalink: "\"/%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6/cyberrt/cyberrt%E6%A1%86%E6%9E%B6%E6%80%BB%E8%A7%88/\"",
      
      categories: "[\"è‡ªåŠ¨é©¾é©¶\"]",
      tags: "[\"CyberRT\"]",
      series: "[\"CyberRTä¸“é¡¹æ€»ç»“\"]",
      date: "\"2025-04-02\""
    });
  
    searchIndex.push({
      title: "\"é€šä¿¡ä¸­é—´ä»¶æœ¯è¯­è¡¨\"",
      permalink: "\"/%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6/cyberrt/%E6%9C%AF%E8%AF%AD%E8%A1%A8/\"",
      
      categories: "[\"è‡ªåŠ¨é©¾é©¶\"]",
      tags: [],
      series: "[\"CyberRTä¸“é¡¹æ€»ç»“\"]",
      date: "\"2025-03-27\""
    });
  
    searchIndex.push({
      title: "\"ç°ä»£C++å¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—\"",
      permalink: "\"/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/c++%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/\"",
      
      categories: "[\"ç¯å¢ƒé…ç½®\"]",
      tags: "[\"c++\"]",
      series: [],
      date: "\"2025-03-26\""
    });
  
    searchIndex.push({
      title: "\"å¸¦ç€ç›®çš„å­¦ï¼šCyberRT\"",
      permalink: "\"/%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6/cyberrt/%E5%B8%A6%E7%9D%80%E9%97%AE%E9%A2%98%E5%AD%A6cyberrt/\"",
      
      categories: "[\"è‡ªåŠ¨é©¾é©¶\"]",
      tags: "[\"CyberRT\"]",
      series: "[\"CyberRTä¸“é¡¹æ€»ç»“\"]",
      date: "\"2025-03-25\""
    });
  
    searchIndex.push({
      title: "\"Linuxç¯å¢ƒå˜é‡åŠ è½½é¡ºåºåˆ†æ\"",
      permalink: "\"/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/linux%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F%E5%88%86%E6%9E%90/\"",
      
      categories: "[\"ç¯å¢ƒé…ç½®\"]",
      tags: "[\"linux\"]",
      series: [],
      date: "\"2025-03-14\""
    });
  
    searchIndex.push({
      title: "\"æ‰‹å†Œé€ŸæŸ¥æ–¹æ¡ˆï¼ˆå¦‚cppreferenceï¼‰\"",
      permalink: "\"/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/zeal-dataset%E4%B8%AD%E6%96%87cppreference%E9%85%8D%E7%BD%AE/\"",
      
      categories: "[\"ç¯å¢ƒé…ç½®\"]",
      tags: "[\"cppreference\"]",
      series: [],
      date: "\"2025-03-12\""
    });
  
    searchIndex.push({
      title: "\"CyberRTä¸­çš„ä»£ç å’Œå·¥ç¨‹æŠ€å·§\"",
      permalink: "\"/%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6/cyberrt/cyberrt%E4%B8%AD%E7%9A%84%E5%B7%A5%E7%A8%8B%E5%92%8C%E4%BB%A3%E7%A0%81%E6%8A%80%E5%B7%A7/\"",
      
      categories: "[\"è‡ªåŠ¨é©¾é©¶\"]",
      tags: "[\"CyberRT\",\"C++\"]",
      series: "[\"CyberRTä¸“é¡¹æ€»ç»“\"]",
      date: "\"2025-03-01\""
    });
  
    searchIndex.push({
      title: "\"è®¾è®¡æ¨¡å¼\"",
      permalink: "\"/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/\"",
      
      categories: "[\"è½¯ä»¶å·¥ç¨‹\"]",
      tags: "[\"SE\"]",
      series: "[\"è®¾è®¡æ¨¡å¼ä¸“é¡¹æ€»ç»“\"]",
      date: "\"2025-02-28\""
    });
  
    searchIndex.push({
      title: "\"ä¸€ç«™å¼ç¯å¢ƒé…ç½®\"",
      permalink: "\"/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/%E4%B8%80%E7%AB%99%E5%BC%8F%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/\"",
      
      categories: "[\"ç¯å¢ƒé…ç½®\"]",
      tags: [],
      series: [],
      date: "\"2025-02-24\""
    });
  
    searchIndex.push({
      title: "\"leetcodeè°ƒè¯•æŒ‡å—\"",
      permalink: "\"/%E7%AE%97%E6%B3%95/leetcode%E8%B0%83%E8%AF%95%E6%8C%87%E5%8D%97/\"",
      
      categories: [],
      tags: "[\"leetcode\"]",
      series: [],
      date: "\"2024-03-14\""
    });
  
    searchIndex.push({
      title: "\"linuxå‘½ä»¤è¡Œå¤§è®°å¿†æ¢å¤æœ¯\"",
      permalink: "\"/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7%E7%94%A8%E6%B3%95/\"",
      
      categories: "[\"å·¥å…·ä½¿ç”¨\"]",
      tags: "[\"linux\",\"cmdline\"]",
      series: "[\"å¿«é€Ÿä¸Šæ‰‹\"]",
      date: "\"2023-11-25\""
    });
  
    searchIndex.push({
      title: "\"ç•ªèŒ„é¸¡è›‹é¢\"",
      permalink: "\"/%E8%A1%A3%E9%A3%9F%E4%BD%8F%E8%A1%8C/%E8%8F%9C%E8%B0%B1/%E7%95%AA%E8%8C%84%E9%B8%A1%E8%9B%8B%E9%9D%A2/\"",
      
      categories: "[\"è¡£é£Ÿä½è¡Œ\"]",
      tags: [],
      series: "[\"å¿«é€Ÿåšé¥­\"]",
      date: "\"2023-10-22\""
    });
  
    searchIndex.push({
      title: "\"PlantUMLå¿«é€Ÿä¸Šæ‰‹\"",
      permalink: "\"/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/plantuml%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/\"",
      
      categories: "[\"å·¥å…·ä½¿ç”¨\"]",
      tags: "[\"uml\",\"plantuml\"]",
      series: "[\"å¿«é€Ÿä¸Šæ‰‹\"]",
      date: "\"2023-10-11\""
    });
  
    searchIndex.push({
      title: "\"WSLå®‰è£…ä¸é…ç½®\"",
      permalink: "\"/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/wsl%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/\"",
      
      categories: "[\"ç¯å¢ƒé…ç½®\"]",
      tags: [],
      series: [],
      date: "\"2023-09-12\""
    });
  
    searchIndex.push({
      title: "\"C++ç½‘ç»œç¼–ç¨‹å…¥é—¨æ¦‚å¿µåŠapiæ€»ç»“\"",
      permalink: "\"/%E7%AC%94%E8%AE%B0/linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/\"",
      
      categories: [],
      tags: "[\"linux\",\"ç½‘ç»œç¼–ç¨‹\"]",
      series: "[\"é¢ç­‹\",\"å¿«é€Ÿä¸Šæ‰‹\"]",
      date: "\"2023-04-02\""
    });
  
    searchIndex.push({
      title: "\"è‹å·æ—…è¡Œè®¡åˆ’\"",
      permalink: "\"/%E8%A1%A3%E9%A3%9F%E4%BD%8F%E8%A1%8C/%E6%97%85%E8%A1%8C%E6%94%BB%E7%95%A5/%E8%8B%8F%E5%B7%9E/\"",
      
      categories: "[\"è¡£é£Ÿä½è¡Œ\"]",
      tags: "[\"æ—…è¡Œ\"]",
      series: [],
      date: "\"2023-04-01\""
    });
  
    searchIndex.push({
      title: "\"gdbå¿«é€Ÿä¸Šæ‰‹\"",
      permalink: "\"/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/gdb%E6%95%99%E7%A8%8B/\"",
      
      categories: "[\"å·¥å…·ä½¿ç”¨\"]",
      tags: "[\"gdb\",\"cmdline\"]",
      series: "[\"å¿«é€Ÿä¸Šæ‰‹\"]",
      date: "\"2022-11-25\""
    });
  
    searchIndex.push({
      title: "\"Ubuntu22.04å®‰è£…Hadoopå®Œå…¨åˆ†å¸ƒå¼é›†ç¾¤\"",
      permalink: "\"/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/ubuntu%E9%85%8D%E7%BD%AEhadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F/\"",
      
      categories: "[\"ç¯å¢ƒé…ç½®\"]",
      tags: "[\"hadoop\"]",
      series: [],
      date: "\"2022-11-21\""
    });
  
    searchIndex.push({
      title: "\"C++è¿æ¥mysql\"",
      permalink: "\"/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/c++%E8%BF%9E%E6%8E%A5mysql/\"",
      
      categories: "[\"ç¯å¢ƒé…ç½®\"]",
      tags: [],
      series: [],
      date: "\"2022-11-20\""
    });
  
    searchIndex.push({
      title: "\"å¾æœCæŒ‡é’ˆç¬”è®°\"",
      permalink: "\"/%E7%AC%94%E8%AE%B0/%E5%BE%81%E6%9C%8Dc%E6%8C%87%E9%92%88/\"",
      
      categories: [],
      tags: [],
      series: [],
      date: "\"2022-10-04\""
    });
  
    searchIndex.push({
      title: "\"Leetcodeåˆ·é¢˜æŒ‡å—\"",
      permalink: "\"/%E7%AE%97%E6%B3%95/leetcode%E5%88%B7%E9%A2%98%E6%8C%87%E5%8D%97/\"",
      
      categories: "[\"ç®—æ³•\"]",
      tags: "[\"leetcode\"]",
      series: "[\"leetcodeåˆ·é¢˜æŒ‡å—\"]",
      date: "\"2022-09-11\""
    });
  
    searchIndex.push({
      title: "\"word é¡µçœ‰é¡µè„šè®¾ç½®\"",
      permalink: "\"/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/word%E9%A1%B5%E7%9C%89%E9%A1%B5%E8%84%9A%E9%85%8D%E7%BD%AE/\"",
      
      categories: "[\"å·¥å…·ä½¿ç”¨\"]",
      tags: [],
      series: [],
      date: "\"2021-04-03\""
    });
  
    searchIndex.push({
      title: "\"Markdown Demo\"",
      permalink: "\"/%E6%B5%8B%E8%AF%95/markdown-demo/\"",
      
      categories: [],
      tags: "[\"markdown\"]",
      series: [],
      date: "\"2021-02-15\""
    });
  
    searchIndex.push({
      title: "\"å¸¸ç”¨æ•°å­¦ç¬¦å·çš„latexè¡¨ç¤º\"",
      permalink: "\"/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/%E5%B8%B8%E7%94%A8%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7%E7%9A%84latex%E8%A1%A8%E7%A4%BA/\"",
      
      categories: "[\"å·¥å…·ä½¿ç”¨\"]",
      tags: "[\"latex\",\"markdown\"]",
      series: [],
      date: "\"2021-02-15\""
    });
  

  showpages()

  const options = {
    includeScore: true,
    threshold: 0.6,
    keys: [
      { name: 'title', weight: 0.7 },
      { name: 'content', weight: 0.3 },
      { name: 'tags', weight: 0.5 },
      { name: 'categories', weight: 0.5 },
      { name: 'series', weight: 0.5 }
    ]
  };

  const fuse = new Fuse(searchIndex, options);

  document.addEventListener('keydown', function(event) {
    if (event.ctrlKey && event.key === 'k') {
      event.preventDefault();
      toggleSearchModal();
    } else if (event.key === 'Escape') {
      document.getElementById('modal-search-input').value = "";
      closeSearchModal();
      var res = document.getElementById('modal-search-results');
      while (res.firstChild) {
        res.removeChild(res.firstChild);
      }
      showpages();
    }
  });

  function toggleSearchModal() {
    const modal = document.getElementById('search-modal');
    if (modal.style.display === 'none') {
      modal.style.display = 'block';
      document.getElementById('modal-search-input').focus();
    } else {
      modal.style.display = 'none';
    }
  }

  function closeSearchModal() {
    const modal = document.getElementById('search-modal');
    modal.style.display = 'none';
  }

  document.getElementById('modal-search-input').addEventListener('input', function(e) {
    const searchTerm = e.target.value.trim();
    const resultsContainer = document.getElementById('modal-search-results');
    resultsContainer.innerHTML = '';

    if (searchTerm === '') {
      showpages()
      return;
    }

    const results = fuse.search(searchTerm);

    results.sort((a, b) => new Date(b.item.date) - new Date(a.item.date));

    if (results.length === 0) {
      showpages()
      resultsContainer.innerHTML = '<p>æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æ–‡ç« </p>';
      return;
    } else {
      debug("å…±æ‰¾åˆ° " + results.length + " ç¯‡åŒ¹é…çš„æ–‡ç« ")
    }

    results.forEach(result => {
      const item = result.item;
      const resultItem = document.createElement('div');
      resultItem.className = 'modal-search-result-item';

      const date = document.createElement('span');
      date.textContent = item.date.replace(/^"|"$/g, '') + '   ';
      date.className = 'modal-search-result-date';

      const link = document.createElement('a');
      link.href = item.permalink.replace(/^"|"$/g, '');
      link.textContent = item.title.replace(/^"|"$/g, '');
      link.className = 'modal-search-result-title';

      resultItem.appendChild(date);
      resultItem.appendChild(link);
      resultsContainer.appendChild(resultItem);
    });
  });
</script>

<style>
 
#search-modal {
    display: none;
    position: fixed;
    top: 6%;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    padding: 20px;
    box-shadow: 0 0 6px rgba(45, 45, 45, 0.5);
    border-radius: 6px;
    z-index: 1000;
    width: 80%;
    max-width: 600px;
    text-align: left;
}

#modal-search-input {
    width: 100%;
    padding: 10px;
    box-sizing: border-box;
    font-size: 1rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-bottom: 1rem;
}

#modal-search-results {
    margin-top: 10px;
    max-height: 60vh;
    overflow-y: auto;
}

.modal-search-result-item {
    padding: 0.7rem;
    margin-bottom: 0.5rem;
    border-bottom: 1px solid #eee;
    display: flex;
    align-items: center;
}

.modal-search-result-date {
    color: #666;
    font-size: 1.1rem;
    margin-right: 0.5rem;
    text-wrap: nowrap;
}

.modal-search-result-title {
    font-weight: bold;
    color: #1a73e8;
    text-decoration: none;
}

.modal-search-result-title:hover {
    text-decoration: underline;
}
</style>


  

  
  <hr />
  Â© 
<a href="https://kaikaixixi.xyz"  target="_blank" rel="noopener noreferrer" >SHUAIKAI</a>
 2021 &ndash; 2025 | ğŸ¨
<a href="https://github.com/captainwc/ksimple"  target="_blank" rel="noopener noreferrer" >KSimple</a>
  

</footer>
</body>

</html>
